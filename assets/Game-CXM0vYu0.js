import{a as React,r as reactExports,g as getDefaultExportFromCjs,j as jsxRuntimeExports}from"./react-spline-Gm59yu5V.js";import{c as cn,u as useHover,B as BorderLight,a as useNavigate,b as useMediaQuery}from"./index-Dn5xmAqW.js";import{b as bank}from"./sound-CMTXQK7H.js";function Svg({className:a,style:s}){return React.createElement("div",{className:cn("w-full h-full aspect-square text-foreground",a),style:s},React.createElement("svg",{id:"Layer_2","data-name":"Layer 2",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 108.8 108.89"},React.createElement("path",{fill:"currentColor","fill-opacity":"0.5",stroke:"#6d28d9","stroke-width":"5",d:"M108.19,63.76c-6.8-1.29-14.24-2.59-20.07-6.8-1.62-2.91.97-5.5,2.91-7.77,4.85-6.8,8.74-12.95,10.68-21.04.32-2.27-.65-5.5-3.24-5.18-5.18,4.53-11.65,8.09-18.45,9.06-1.62.32-2.59-1.29-2.91-2.59-.97-9.06-3.56-17.8-7.12-25.89-.97-1.94-2.91-3.56-5.18-3.56-2.27.32-1.62,3.24-1.94,4.85-1.29,5.83-2.59,11.33-6.15,15.86-.97,1.29-2.59.65-3.88,0-8.09-5.83-15.54-11-24.92-13.59-1.62-.32-2.91.32-4.21.97s-.65,1.62-.65,2.27c3.56,6.15,8.09,11.33,9.06,18.45,0,1.62-1.29,2.59-2.59,2.59-9.39,1.29-17.8,3.56-26.22,7.44-2.27,1.29-4.21,3.88-2.91,6.47,6.8.97,13.27,2.27,19.42,6.15,1.29.65,1.94,1.94,1.29,3.24-3.56,6.15-8.09,11.33-11,17.8-1.29,2.91-2.27,5.5-3.24,8.41-.32,1.94.32,3.88,1.94,4.85.65.32,1.62.32,2.27-.32l.97-.97c.97-.32,1.62-.97,2.27-1.62,4.85-2.59,9.06-6.15,14.56-5.83.97,0,1.94,0,2.27,1.29.97,3.88.97,7.44,1.94,11.33.32,1.29.65,2.27.97,3.56,1.62,4.53,2.59,9.06,5.5,13.27.97,1.62,3.24,3.24,5.5,1.94,1.29-5.5,1.94-10.68,4.21-15.86,1.29-2.27,2.59-5.83,5.5-4.53,1.62.65,3.24,1.94,4.85,3.24,6.47,4.85,13.59,8.09,21.04,10.68,1.29.32,2.59,0,3.56-.65.65-.65,2.27-1.62,1.62-2.59-4.21-5.83-8.09-11.98-9.39-18.77.65-2.59,3.56-2.91,5.83-2.91,8.41-.97,16.18-3.56,23.95-7.44,1.62-.97,3.56-3.88,1.94-5.83Z"})))}const __vite_import_meta_env__$1={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},createStoreImpl=a=>{let s;const o=new Set,c=(x,E)=>{const S=typeof x=="function"?x(s):x;if(!Object.is(S,s)){const g=s;s=E??(typeof S!="object"||S===null)?S:Object.assign({},s,S),o.forEach(j=>j(s,g))}},i=()=>s,b={setState:c,getState:i,getInitialState:()=>R,subscribe:x=>(o.add(x),()=>o.delete(x)),destroy:()=>{(__vite_import_meta_env__$1?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),o.clear()}},R=s=a(c,i,b);return b},createStore=a=>a?createStoreImpl(a):createStoreImpl;var withSelector={exports:{}},withSelector_production_min={},shim={exports:{}},useSyncExternalStoreShim_production_min={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e=reactExports;function h$1(a,s){return a===s&&(a!==0||1/a===1/s)||a!==a&&s!==s}var k=typeof Object.is=="function"?Object.is:h$1,l=e.useState,m=e.useEffect,n$1=e.useLayoutEffect,p$1=e.useDebugValue;function q$1(a,s){var o=s(),c=l({inst:{value:o,getSnapshot:s}}),i=c[0].inst,d=c[1];return n$1(function(){i.value=o,i.getSnapshot=s,r$1(i)&&d({inst:i})},[a,o,s]),m(function(){return r$1(i)&&d({inst:i}),a(function(){r$1(i)&&d({inst:i})})},[a]),p$1(o),o}function r$1(a){var s=a.getSnapshot;a=a.value;try{var o=s();return!k(a,o)}catch{return!0}}function t$1(a,s){return s()}var u$1=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?t$1:q$1;useSyncExternalStoreShim_production_min.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:u$1;shim.exports=useSyncExternalStoreShim_production_min;var shimExports=shim.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h=reactExports,n=shimExports;function p(a,s){return a===s&&(a!==0||1/a===1/s)||a!==a&&s!==s}var q=typeof Object.is=="function"?Object.is:p,r=n.useSyncExternalStore,t=h.useRef,u=h.useEffect,v=h.useMemo,w=h.useDebugValue;withSelector_production_min.useSyncExternalStoreWithSelector=function(a,s,o,c,i){var d=t(null);if(d.current===null){var f={hasValue:!1,value:null};d.current=f}else f=d.current;d=v(function(){function b(g){if(!R){if(R=!0,x=g,g=c(g),i!==void 0&&f.hasValue){var j=f.value;if(i(j,g))return E=j}return E=g}if(j=E,q(x,g))return j;var C=c(g);return i!==void 0&&i(j,C)?j:(x=g,E=C)}var R=!1,x,E,S=o===void 0?null:o;return[function(){return b(s())},S===null?void 0:function(){return b(S())}]},[s,o,c,i]);var y=r(a,d[0],d[1]);return u(function(){f.hasValue=!0,f.value=y},[y]),w(y),y};withSelector.exports=withSelector_production_min;var withSelectorExports=withSelector.exports;const useSyncExternalStoreExports=getDefaultExportFromCjs(withSelectorExports),__vite_import_meta_env__={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},{useDebugValue}=React,{useSyncExternalStoreWithSelector}=useSyncExternalStoreExports;let didWarnAboutEqualityFn=!1;const identity=a=>a;function useStore(a,s=identity,o){(__vite_import_meta_env__?"production":void 0)!=="production"&&o&&!didWarnAboutEqualityFn&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),didWarnAboutEqualityFn=!0);const c=useSyncExternalStoreWithSelector(a.subscribe,a.getState,a.getServerState||a.getInitialState,s,o);return useDebugValue(c),c}const createImpl=a=>{(__vite_import_meta_env__?"production":void 0)!=="production"&&typeof a!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const s=typeof a=="function"?createStore(a):a,o=(c,i)=>useStore(s,c,i);return Object.assign(o,s),o},create=a=>a?createImpl(a):createImpl,projects=[{name:"Bot.ts",image:"bot.ts.png",description:"TypeScript framework for building Discord bots",detail:"Includes a CLI for generating new bots and bot files, actually my biggest project",url:"https://ghom.gitbook.io/bot.ts"},{name:"CRISPR-Crunch",image:"crispr-crunch.png",description:"Puzzle game about gene editing",detail:"Made in TypeScript with PixiJS and Booyah with the PlayCurious team",url:"https://playcurious.games/our-games/crispr-crunch"},{name:"Portfolio",image:"portfolio.png",description:"My personal portfolio with a card game",detail:"Made in TypeScript with React, Vite, Tailwind CSS, Zustand and a lot of passion"},{name:"Les Labs JS",image:"js-labs.png",description:"A Discord server for JavaScript developers I own and manage",detail:"The best place to learn and share about the JavaScript ecosystem",url:"https://discord.gg/3vC2XWK"},{name:"2D Shooter",image:"shooter.png",description:"My first game in TypeScript",detail:'A simple 2D shooter game with a spaceship and enemies made with p5.js (click "Play offline" for test)',url:"https://github.com/GhomKrosmonaute/TypedShooterGame"},{name:"Gario",image:"gario.png",description:"A 2D platformer game for showcase",detail:"A simple 2D platformer game with a character, a level, a life system and a checkpoint system made with p5.js in TypeScript",url:"https://github.com/GhomKrosmonaute/Gario"},{name:"Booyah",image:"booyah.png",description:"A TypeScript game engine",detail:"A powerful game engine using state machines made in TypeScript by Jesse Himmelstein and forked and improved by me",url:"https://github.com/GhomKrosmonaute/Booyah"},{name:"Nano",image:"nano.png",description:"TypeScript library for building modular Discord bots",detail:"You can use this lib for building Discord bots with a modular and flexible architecture",url:"https://github.com/NanoWorkspace"},{name:"Sea Rescue",image:"sea-rescue.png",description:"3D game about ocean cleaning",detail:"Made with TypeScript, Three.js and Booyah with the PlayCurious team",url:"https://playcurious.games/our-games/sea-rescue/"},{name:"Site Photographe",image:"photo.png",description:"A website for a photographer",detail:"Made with Next.js, TypeScript, React and Tailwind CSS. Optimized for search engines and performance, including a CMS"}],technos=[{name:"TypeScript",logo:"ts.png"},{name:"React",logo:"react.webp"},{name:"Tailwind CSS",logo:"tailwind.png"},{name:"NodeJS",logo:"node.png"},{name:"Vercel",logo:"vercel.png"},{name:"Next.js",logo:"nextjs.webp"},{name:"PostgreSQL",logo:"pgsql.png"},{name:"Docker",logo:"docker.webp"},{name:"PixiJS",logo:"pixi.png"},{name:"Three.js",logo:"three.png"},{name:"Gulp",logo:"gulp.webp"},{name:"Knex",logo:"knex.png"},{name:"Git",logo:"git.png"}],effects=[{description:"Ajoute 1 à la street-cred de Ghom",onPlayed:"await state.addStreetCred(1)",type:"action",cost:2},{description:"Ajoute 2 à la street-cred de Ghom",onPlayed:"await state.addStreetCred(2)",type:"action",cost:4},{description:"Si la street-cred de Ghom est inférieure à 5, ajoute 2 à la street-cred de Ghom",onPlayed:"await state.addStreetCred(2)",condition:"state.streetCred < 5",type:"action",cost:3},{description:"Le matin, ajoute 1 à la street-cred de Ghom. L'après-midi, ajoute 2 à l'énergie",onPlayed:"if (new Date().getHours() < 12) { await state.addStreetCred(1) } else { await state.addEnergy(2) }",type:"action",cost:0},{description:'Ajoute autant de street-cred à Ghom que de cartes "projet" en main',onPlayed:"await state.addStreetCred(state.hand.filter(card => card.effect.type === 'action').length - 1)",condition:"state.hand.filter(card => card.effect.type === 'action').length > 1",type:"action",cost:4},{description:"Si le dark mode est activé, ajoute 2 à la street-cred de Ghom",onPlayed:"await state.addStreetCred(2)",condition:'localStorage.getItem("theme") === "dark"',type:"action",cost:3},{description:"Pioche une carte",onPlayed:"await state.draw()",condition:"state.deck.length >= 1",type:"support",cost:1},{description:"Pioche 2 cartes",onPlayed:"await state.draw(2)",condition:"state.deck.length >= 2",type:"support",cost:2},{description:"Si tu as moins de 4 cartes en main, pioche 2 cartes",onPlayed:"await state.draw(2)",condition:"state.hand.length < 4 && state.deck.length >= 2",type:"support",cost:1},{description:'Pioche une carte "projet"',onPlayed:"await state.draw(1, 'action')",condition:"state.deck.some(card => card.effect.type === 'action')",type:"support",cost:2},{description:`Si tu n'as pas de carte "projet" en main, pioche une carte "projet"`,onPlayed:"await state.draw(1, 'action')",condition:"state.hand.every(card => card.effect.type !== 'action') && state.deck.some(card => card.effect.type === 'action')",type:"support",cost:1},{description:"Défausse une carte aléatoire, pioche une carte",onPlayed:"await state.drop(); await state.draw()",condition:"state.hand.length >= 2",type:"support",cost:0},{description:"Défausse toutes les cartes en main, pioche 5 cartes",onPlayed:"await state.dropAll(); await state.draw(5)",type:"support",cost:3},{description:"Si tu as plus de 7 cartes en main, ajoute 1 d'énergie et 1 à la street-cred de Ghom",onPlayed:"await state.addEnergy(1); await state.addStreetCred(1)",condition:"state.hand.length > 7",type:"support",cost:0}];async function wait(){return new Promise(a=>setTimeout(a,500))}function map(a,s,o,c,i,d=!1){const f=(a-s)/(o-s)*(i-c)+c;return d?c<i?Math.max(Math.min(f,i),c):Math.max(Math.min(f,c),i):f}function isProjectCardInfo(a){return a.image!==void 0}const supports=effects.filter(a=>a.type==="support"),actions=effects.filter(a=>a.type==="action"),technoWithEffect=technos.map((a,s)=>{const o=map(s,0,technos.length,0,supports.length,!0);return{...a,state:"idle",effect:supports[Math.floor(o)]}}),projectsWithEffect=projects.map((a,s)=>{const o=map(s,0,projects.length,0,actions.length,!0);return{...a,state:"idle",effect:actions[Math.floor(o)]}}),deck=[...technoWithEffect,...projectsWithEffect].sort(()=>Math.random()-.5),useCardGame=create((set,getState)=>({deck:deck.slice(7),hand:deck.slice(0,7),energy:20,streetCred:0,addEnergy:a=>{bank.gain.play(),set(s=>({energy:s.energy+a}))},addStreetCred:a=>{set(s=>({streetCred:s.streetCred+a}))},draw:async(a=1,s)=>{bank.draw.play(),set(o=>{const c=o.hand.slice(),i=o.deck.slice().filter(f=>s?f.effect.type===s:!0),d=[];for(let f=0;f<a&&i.length!==0;f++){const y=i.pop();y.state="drawn",d.push(y.name),c.push(y)}return{hand:c,deck:o.deck.filter(f=>!d.includes(f.name))}}),await wait(),set(o=>({hand:o.hand.map(c=>({...c,state:"idle"}))}))},drop:async()=>{bank.drop.play();const a=getState(),s=a.hand.slice().filter(i=>i.state==="idle"),o=Math.floor(Math.random()*s.length),c=s[o];set({hand:a.hand.map(i=>i.name===c.name?{...i,state:"dropped"}:i)}),await wait(),set(i=>({deck:[{...c,state:null},...i.deck],hand:i.hand.filter(d=>d.name!==c.name)}))},dropAll:async()=>{bank.drop.play();const a=getState();set({hand:a.hand.map(s=>s.state==="idle"?{...s,state:"dropped"}:s)}),await wait(),set(s=>({deck:[...s.hand.map(o=>({...o,state:null})),...s.deck],hand:[]}))},play:async card=>{let state=getState();const cantPlay=async()=>{bank.unauthorized.play(),set({hand:state.hand.map(a=>a.name===card.name?{...a,state:"unauthorized"}:a)}),await wait(),set({hand:state.hand.map(a=>a.name===card.name?{...a,state:"idle"}:a)})};if(card.effect.condition&&!eval(card.effect.condition)){await cantPlay();return}if(state.energy<card.effect.cost){await cantPlay();return}bank.play.play(),set({energy:state.energy-card.effect.cost});const thread1=async()=>{set({hand:state.hand.map(a=>a.name===card.name?{...a,state:"played"}:a)}),await wait(),set(a=>({deck:[{...card,state:null},...a.deck],hand:a.hand.filter(s=>s.name!==card.name)}))},thread2=async()=>{/^await state.draw(.*?)$/.test(card.effect.onPlayed)&&await wait(),await eval(`(async () => { ${card.effect.onPlayed} })()`)};await Promise.all([thread1(),thread2()]),state=getState(),state.hand.length===0&&state.draw()}})),constantStyle={transformStyle:"preserve-3d"},Tilt=({max:a=20,reverse:s=!1,scale:o=1,perspective:c=1e3,className:i="",children:d,style:f})=>{const y=reactExports.useRef(null),b=useHover(y),[R,x]=reactExports.useState({}),E=reactExports.useCallback(g=>{if(y.current){const j=y.current.getBoundingClientRect(),C=g.clientX-j.left,$=g.clientY-j.top,_=j.width/2,P=j.height/2,D=($-P)/P*a,G=(C-_)/_*a;x({...constantStyle,transform:`
            perspective(${c}px)
            rotateX(${s?D:-D}deg)
            rotateY(${s?-G:G}deg)
            scale(${o})
          `})}},[a,c,s,o]),S=reactExports.useCallback(()=>{x({...constantStyle,transition:"transform 0.5s ease-in-out",transform:"scale(1)"})},[]);return reactExports.useEffect(()=>{const g=y.current;return b?g&&(g.addEventListener("mousemove",E),g.addEventListener("mouseleave",S)):S(),()=>{g&&(g.removeEventListener("mousemove",E),g.removeEventListener("mouseleave",S)),S()}},[a,s,o,c,b]),jsxRuntimeExports.jsx("div",{ref:y,className:cn("will-change-transform",i),style:{...R,...f},children:d})},GameCard=a=>{const s=useCardGame(d=>d.hand.length),o=useCardGame(d=>d.hand.some(f=>f.state!=="idle")),c=useCardGame(d=>d.play),i=a.position-(s-1)/2;return jsxRuntimeExports.jsx("div",{className:cn("game-card","relative w-[calc(630px/3)] h-[calc(880px/3)]","transition-transform hover:-translate-y-14","-mx-3.5 z-10 hover:z-20 cursor-pointer select-none",a.card.state),onClick:()=>{o||c(a.card)},onContextMenu:d=>{d.preventDefault(),isProjectCardInfo(a.card)&&window.open(a.card.url,"_blank")},style:{marginBottom:`${20-Math.abs(i)*5}px`,rotate:`${i*2}deg`,transitionDuration:"0.3s",transitionTimingFunction:"ease-in-out"},children:jsxRuntimeExports.jsxs(Tilt,{scale:1.1,className:cn("group/game-card transition-shadow duration-200 ease-in-out","shadow-primary hover:shadow-glow-20","flex flex-col w-full h-full rounded-md","rounded-md *:shrink-0",{"bg-card":a.card.effect.type==="support"}),children:[isProjectCardInfo(a.card)&&a.card.detail&&jsxRuntimeExports.jsx("div",{className:cn("absolute pointer-events-none left-1/2 -top-[10px] -translate-x-1/2 -translate-y-full rounded-2xl bg-card","px-5 py-2 opacity-0 group-hover/game-card:animate-appear text-sm w-max max-w-full text-center shadow shadow-primary"),children:a.card.detail}),jsxRuntimeExports.jsxs("div",{className:cn("flex justify-start items-center h-10 rounded-t-md",{"bg-primary":a.card.effect.type==="action","bg-secondary/50":a.card.effect.type==="support"}),style:{transformStyle:"preserve-3d"},children:[jsxRuntimeExports.jsxs("div",{className:"font-changa shrink-0 relative",style:{transform:"translateZ(5px) translateX(-15px)",transformStyle:"preserve-3d"},children:[jsxRuntimeExports.jsx(Svg,{className:"w-16 h-16 text-background/75",style:{transform:"translateZ(5px) scale(0.7)"}}),jsxRuntimeExports.jsx("div",{className:"absolute top-1/2 left-1/2 font-bold text-2xl",style:{transform:"translateZ(10px) translate(-50%, -45%)"},children:a.card.effect.cost})]}),jsxRuntimeExports.jsx("h2",{className:cn("whitespace-nowrap overflow-hidden text-ellipsis shrink-0 flex-grow",{"text-sm":a.card.name.length>20,"text-primary-foreground":a.card.effect.type==="action"}),style:{transform:"translateZ(5px)"},children:a.card.name})]}),isProjectCardInfo(a.card)?jsxRuntimeExports.jsx(GameCardProject,{card:a.card}):jsxRuntimeExports.jsx(GameCardTechno,{card:a.card}),jsxRuntimeExports.jsx("div",{className:"bg-card flex-grow rounded-b-md",style:{transformStyle:"preserve-3d"},children:jsxRuntimeExports.jsx("p",{className:"py-[10px] px-[15px] text-center",style:{transform:"translateZ(10px)"},children:a.card.effect.description})}),jsxRuntimeExports.jsx(BorderLight,{groupName:"game-card",appearOnHover:!0,disappearOnCorners:!0}),jsxRuntimeExports.jsx(BorderLight,{groupName:"game-card",appearOnHover:!0,disappearOnCorners:!0,opposed:!0})]})})},GameCardProject=a=>jsxRuntimeExports.jsxs("div",{className:"group/image",style:{transformStyle:"preserve-3d"},children:[jsxRuntimeExports.jsx("div",{className:cn("inset-shadow","relative flex justify-center items-center"),style:{transformStyle:"preserve-3d"},children:jsxRuntimeExports.jsx("img",{src:`images/projects/${a.card.image}`,alt:`Illustration du projet "${a.card.name}"`,className:"w-full aspect-video object-cover",style:{transform:"translateZ(-15px)"}})}),jsxRuntimeExports.jsx("div",{className:cn("transition-opacity duration-1000 group-hover/image:opacity-0","absolute bottom-0 w-full h-1/3 bg-background/50","flex justify-center items-center"),style:{transform:"translateZ(-5px)"},children:jsxRuntimeExports.jsxs("p",{className:"text-sm text-center",children:['"',a.card.description,'"']})})]}),spinners=["React","Knex"],GameCardTechno=a=>jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx("div",{className:"flex justify-center items-center mt-4",style:{transform:"translateZ(20px)"},children:jsxRuntimeExports.jsx("img",{src:`images/techno/${a.card.logo}`,alt:`Logo de la techno "${a.card.name}"`,className:cn("w-2/3 object-contain aspect-square",{"group-hover/game-card:animate-spin-forward":spinners.includes(a.card.name)})})})}),Game=a=>{const s=useCardGame(),o=useNavigate(),c=useMediaQuery("(width >= 768px) and (height >= 768px)");return React.useEffect(()=>{c||o("/")},[c,o]),jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx("div",{className:cn("absolute flex items-center -translate-x-1/2","left-[50vw] transition-[bottom] ease-in-out duration-1000",a.show?"bottom-[-50px]":"-bottom-full"),children:s.hand.map((i,d)=>jsxRuntimeExports.jsx(GameCard,{card:i,position:d},d))})})};export{Game};
