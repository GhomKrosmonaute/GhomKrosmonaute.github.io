import{a as ye,u as T,j as r,c as d,B as C,r as v,S as xe,R as u,C as B,d as ve,e as we,f as U}from"./index-lBmvXU8O.js";import{b as f}from"./sound-ClgsG6Te.js";const P=20,ae=8,E=10,_=500,be={string:["20","50","75"],number:[5,7,10]},g=5,je=10,Ne={eachDay:["Chaque jour","par jour"],eachTurn:["A chaque carte jouée","par carte"],emptyHand:["Quand votre main est vide","chaque fois que la main est vide"],reputationDeclines:["Quand votre réputation baisse","à chaque baisse de réputation"]},W=[{name:"TypeScript",logo:"ts.png"},{name:"React",logo:"react.webp"},{name:"Tailwind CSS",logo:"tailwind.png"},{name:"NodeJS",logo:"node.png"},{name:"Vercel",logo:"vercel.png"},{name:"Next.js",logo:"nextjs.webp"},{name:"PostgreSQL",logo:"pgsql.png"},{name:"Docker",logo:"docker.webp"},{name:"PixiJS",logo:"pixi.png"},{name:"Three.js",logo:"three.png"},{name:"Gulp",logo:"gulp.webp"},{name:"Knex",logo:"knex.png"},{name:"Git",logo:"git.png"},{name:"Processing",logo:"processing.webp"},{name:"p5.js",logo:"p5.png"},{name:"Strapi",logo:"strapi.png"},{name:"Windows",logo:"windows.png"},{name:"MacOS",logo:"macos.png"},{name:"Linux",logo:"linux.png"},{name:"Jetbrains",logo:"jetbrains.webp"},{name:"Ruby",logo:"ruby.png"}],X=[{name:"Bot.ts",image:"bot.ts.png",description:"TypeScript framework for building Discord bots",detail:"Inclus un CLI pour générer des bots et des fichiers de bot. Actuellement mon projet le plus important.",url:"https://ghom.gitbook.io/bot.ts"},{name:"CRISPR-Crunch",image:"crispr-crunch.png",description:"Puzzle game about gene editing",detail:"Un jeu de puzzle sur l'édition de gènes réalisé avec TypeScript, PixiJS et Booyah avec l'équipe PlayCurious.",url:"https://playcurious.games/our-games/crispr-crunch"},{name:"Portfolio",image:"portfolio.png",description:"My personal portfolio with a card game",detail:"Mon portfolio réalisé avec TypeScript, React, Vite, Tailwind CSS, Zustand et beaucoup de passion"},{name:"Les Labs JS",image:"js-labs.png",description:"A Discord server for JavaScript developers I own and manage",detail:"Le meilleur endroit pour apprendre et partager sur l'écosystème JavaScript",url:"https://discord.gg/3vC2XWK"},{name:"2D Shooter",image:"shooter.png",description:"My first game in TypeScript",detail:"Un simple jeu de tir 2D avec un vaisseau spatial et des ennemis réalisé avec p5.js en TypeScript",url:"https://github.com/GhomKrosmonaute/TypedShooterGame"},{name:"Gario",image:"gario.png",description:"A 2D platformer game for showcase",detail:"Un simple jeu de plateforme 2D avec un système de checkpoint réalisé avec p5.js en TypeScript",url:"https://github.com/GhomKrosmonaute/Gario"},{name:"Booyah",image:"booyah.png",description:"A TypeScript game engine",detail:"Un moteur de jeu puissant utilisant des machines à états réalisé en TypeScript par Jesse Himmelstein et amélioré par Ghom",url:"https://github.com/GhomKrosmonaute/Booyah"},{name:"Nano",image:"nano.png",description:"TypeScript library for building modular Discord bots",detail:"Vous pouvez utiliser cette lib pour construire des bots Discord avec une architecture modulaire et flexible",url:"https://github.com/NanoWorkspace"},{name:"Sea Rescue",image:"sea-rescue.png",description:"3D game about ocean cleaning",detail:"Réalisé avec TypeScript, Three.js et Booyah avec l'équipe PlayCurious.",url:"https://playcurious.games/our-games/sea-rescue/"},{name:"Site Photographe",image:"photo.png",description:"A website for a photographer",detail:"Rélisé avec Next.js, TypeScript, React et Tailwind CSS. Optimisé pour le référencement et les performances. Inclus un CMS."},{name:"RedMetrics",image:"red-metrics.png",description:"Open source web metrics tool",detail:"Réalisé avec TypeScript, React, PostgreSQL et Express chez PlayCurious.",url:"https://github.com/play-curious/RedMetrics2/"},{name:"WakFight",image:"wak-fight.png",description:"RPG fighting Discord bot",detail:"Mon premier bot Discord RPG basé sur l'univers de Wakfu."},{name:"Boat Quest",image:"edenred.png",description:"2D game about ocean cleaning",detail:"Réalisé avec TypeScript, PixiJS et Booyah avec l'équipe PlayCurious pour EdenRed.",url:"https://playcurious.games/our-games/edenred-boat-quest/"},{name:"Survival RPG",image:"survival-rpg.png",description:"Hardcore RPG Discord bot",detail:"Un bot Discord RPG hardcore en rogue-like.",url:"https://discord.gg/7N5pJEY"}],re=[{description:`Gagne ${2*g}M$`,onPlayed:async e=>await e.addMoney(2*g),type:"action",cost:2},{description:`Gagne ${4*g}M$`,onPlayed:async e=>await e.addMoney(4*g),type:"action",cost:4},{description:`Le matin, gagne ${2*g}M$. L'après-midi, gagne 2 @energys`,onPlayed:async e=>{new Date().getHours()<12?await e.addMoney(2*g):await e.addEnergy(2)},type:"action",cost:0},{description:`Gagne ${2*g}M$ fois le nombre de cartes @action en main en comptant celle-ci`,onPlayed:async e=>{await e.addMoney(2*g*e.hand.filter(a=>a.effect.type==="action").length)},type:"action",cost:4},{description:`Si le dark mode est activé, gagne ${4*g}M$`,onPlayed:async e=>await e.addMoney(4*g),condition:()=>localStorage.getItem("theme")==="dark",type:"action",cost:3},{description:`Si la @reputation est inférieur à 5, gagne ${4*g}M$`,onPlayed:async e=>await e.addMoney(4*g),condition:e=>e.reputation<5,type:"action",cost:2},{description:"Joue gratuitement la carte la plus à droite de ta main",onPlayed:async e=>await e.play(e.hand[e.hand.length-1],{free:!0}),condition:(e,a)=>{const t=e.hand[e.hand.length-1];return t&&t.name!==a.name&&(!t.effect.condition||t.effect.condition(e,e.hand[e.hand.length-1]))},type:"action",cost:4,waitBeforePlay:!0},{description:"Pioche une carte",onPlayed:async e=>await e.draw(),condition:e=>e.deck.length>=1,type:"support",cost:1,waitBeforePlay:!0},{description:"Pioche 2 cartes",onPlayed:async e=>await e.draw(2),condition:e=>e.deck.length>=1,type:"support",cost:2,waitBeforePlay:!0},{description:"Si tu as moins de 5 cartes en main, pioche 2 cartes",onPlayed:async e=>await e.draw(2),condition:e=>e.hand.length<5&&e.deck.length>=1,type:"support",cost:1,waitBeforePlay:!0},{description:"Pioche une carte @action",onPlayed:async e=>await e.draw(1,{filter:a=>a.effect.type==="action"}),condition:e=>e.deck.some(a=>a.effect.type==="action"),type:"support",cost:2,waitBeforePlay:!0},{description:"Si tu n'as pas de carte @action en main, pioche une carte @action",onPlayed:async e=>await e.draw(1,{filter:a=>a.effect.type==="action"}),condition:e=>e.hand.every(a=>a.effect.type!=="action")&&e.deck.some(a=>a.effect.type==="action"),type:"support",cost:1,waitBeforePlay:!0},{description:`Défausse une carte aléatoire, pioche une carte et gagne ${2*g}M$`,onPlayed:async e=>{await e.drop(),await e.draw(),await e.addMoney(2*g)},condition:e=>e.hand.length>=2&&e.deck.length>=1,type:"support",cost:1,waitBeforePlay:!0},{description:"Renvoie une carte aléatoire dans la pioche, pioche une carte",onPlayed:async e=>{await e.drop({toDeck:!0}),await e.draw()},condition:e=>e.hand.length>=2,type:"support",cost:0,waitBeforePlay:!0},{description:"Défausse les cartes en main, pioche 5 cartes",onPlayed:async e=>{await e.dropAll(),await e.draw(5)},condition:e=>e.deck.length>=1,type:"support",cost:1,waitBeforePlay:!0},{description:"Renvoie toutes les cartes en main dans la pioche, pioche 5 cartes",onPlayed:async e=>{await e.dropAll({toDeck:!0}),await e.draw(5)},type:"support",cost:5,waitBeforePlay:!0},{description:"Pioche autant de carte que d'@upgrades découvertes",onPlayed:async e=>{await e.draw(e.upgrades.length)},condition:e=>e.upgrades.length>0&&e.deck.length>=1,type:"support",cost:3,waitBeforePlay:!0},{description:"Défausse les cartes @support en main(min 1), pioche 2 cartes @action",onPlayed:async e=>{await e.dropAll({filter:a=>a.effect.type==="support"}),await e.draw(2,{filter:a=>a.effect.type==="action"})},condition:e=>e.hand.filter(a=>a.effect.type==="support").length>1,type:"support",cost:1,waitBeforePlay:!0},{description:"Défausse les cartes @action en main(min 1), pioche 3 cartes",onPlayed:async e=>{await e.dropAll({filter:a=>a.effect.type==="action"}),await e.draw(3)},condition:e=>e.hand.some(a=>a.effect.type==="action"),type:"support",cost:0,waitBeforePlay:!0},{description:"Pioche 2 cartes qui coûtent de l'@energy",onPlayed:async e=>{await e.draw(2,{filter:a=>typeof a.effect.cost=="number"})},condition:e=>e.deck.some(a=>typeof a.effect.cost=="number"),type:"support",cost:4,waitBeforePlay:!0},{description:"Divise le prix de la prochaine carte jouée par 2",onPlayed:async e=>await e.addNextCardModifier(a=>({...a,effect:{...a.effect,cost:typeof a.effect.cost=="number"?Math.ceil(a.effect.cost/2):String(Math.ceil(Number(a.effect.cost)/2))}})),type:"support",cost:3},{description:"Double l'@energy",onPlayed:async e=>await e.addEnergy(e.energy),type:"action",cost:"20"},{description:"Ajoute 4 @energys",onPlayed:async e=>await e.addEnergy(4),type:"action",cost:String(4*g)},{description:"Si la @reputation est inférieur à 5, ajoute 5 @energys",onPlayed:async e=>await e.addEnergy(5),condition:e=>e.reputation<5,type:"action",cost:String(3*g)},{description:"Remplis la jauge de @reputation",onPlayed:async e=>await e.addReputation(10),type:"action",cost:String(5*je*g),ephemeral:!0}],Se=[{name:"Starbucks",triggerEvent:"eachDay",description:"Rend @cumul @energy@s",image:"starbucks.png",condition:e=>e.energy<P,onTrigger:async(e,a)=>{await e.addEnergy(a.cumul)},cumulable:!0,max:3,cost:String(20*g)},{name:"Méditation",triggerEvent:"eachDay",description:"Pioche @cumul carte@s",image:"meditation.png",condition:e=>e.deck.length>0,onTrigger:async(e,a)=>{await e.draw(a.cumul)},cumulable:!0,max:3,cost:String(20*g)},{name:"Bourse",triggerEvent:"eachDay",description:"Gagne @cumul fois 10% de votre capital",image:"bourse.png",condition:e=>e.money>0,onTrigger:async(e,a)=>{await e.addMoney(Math.ceil(a.cumul/100*e.money))},cumulable:!0,cost:String(8*g)},{name:"Recyclage",triggerEvent:"eachDay",description:"Place @cumul carte@s aléatoire@s de la défausse dans le deck",image:"recyclage.png",condition:e=>e.discard.length>0,onTrigger:async(e,a)=>{await e.recycle(a.cumul)},cumulable:!0,max:3,cost:String(20*g)},{name:"I.A",triggerEvent:"eachDay",description:"Gagne @cumulM$ fois le nombre de carte en défausse",image:"ia.png",condition:e=>e.discard.length>0,onTrigger:async(e,a)=>{await e.addMoney(a.cumul*e.discard.length)},cumulable:!0,cost:String(80*g)},{name:"Sport",triggerEvent:"eachDay",description:"Gagne @cumul @reputation@s",image:"sport.png",condition:e=>e.reputation<E,onTrigger:async(e,a)=>{await e.addReputation(a.cumul,{skipGameOverCheck:!0})},cumulable:!0,max:2,cost:20},{name:"PC Puissant",triggerEvent:"eachDay",description:"Gagne @cumulM$ fois le nombre d'@energy",image:"pc-puissant.png",condition:e=>e.energy>0,onTrigger:async(e,a)=>{await e.addMoney(a.cumul*e.energy)},cumulable:!0,max:2,cost:String(40*g)},{name:"Stagiaire",triggerEvent:"eachDay",description:"Gagne @cumulM$ fois le nombre de cartes en main",image:"stagiaire.png",condition:e=>e.hand.length>0,onTrigger:async(e,a)=>{await e.addMoney(a.cumul*e.hand.length)},cumulable:!0,max:5,cost:String(20*g)}],ne=Se.map(e=>(e.description=`${e.description} ${Ne[e.triggerEvent][1]}`,e));function R(e){return{"text-upgrade":e===0,"text-zinc-400":e===1,"text-orange-600":e===2}}function ke(e,a){const t=e.upgrades.length,s=be[typeof a.effect.cost][t]??1/0;return Math.min(Number(s),Number(a.effect.cost))}function Ce(e){return JSON.parse(JSON.stringify(e,(a,t)=>typeof t=="function"?void 0:t))}function Me(e,a){const t=Ce(a),s=e.nextCardModifiers.slice();return a.effect.upgrade&&s.unshift(n=>n.effect.upgrade?{...n,effect:{...n.effect,cost:ke(e,n)}}:n),s.reduce((n,o)=>o(n),t)}function L(e,a){const t=typeof a.effect.cost=="number"?"energy":"money",s=Me(e,a),n=Number(s.effect.cost),o=t==="money"?e[t]>=n:e[t]+e.reputation>=n;return{needs:t,cost:n,canBeBuy:o}}function N(e){return e.replace(/(\(.+?\))/g,`<span style="position: relative; transform-style: preserve-3d">
        <span style="
          display: inline-block; 
          position: absolute; 
          font-size: 12px; 
          white-space: nowrap;
          transform: rotate(5deg) translateX(-50%) translateY(-30%) translateZ(10px);">$1</span>
      </span>`).replace(/MONEY_TO_REACH/g,String(_)).replace(/MAX_HAND_SIZE/g,String(ae)).replace(/@action([^\s.:,]*)/g,'<span style="color: hsl(var(--action)); transform: translateZ(5px); font-weight: bold;">Action$1</span>').replace(/@reputation([^\s.:,]*)/g,'<span style="color: hsl(var(--reputation)); transform: translateZ(5px); font-weight: bold;">Réputation$1</span>').replace(/@upgrade([^\s.:,]*)/g,'<span style="color: hsl(var(--upgrade)); transform: translateZ(5px); font-weight: bold;">Amélioration$1</span>').replace(/@support([^\s.:,]*)/g,'<span style="display: inline-block; background-color: hsla(var(--support) / 0.5); color: hsl(var(--support-foreground)); padding: 0 6px; border-radius: 4px; transform: translateZ(5px); font-weight: bold;">Support$1</span>').replace(/@energy([^\s.:,]*)/g,'<span style="color: hsl(var(--energy)); transform: translateZ(5px); font-weight: bold;">Énergie$1</span>').replace(/((?:\d+|<span[^>]*>\d+<\/span>)M\$)/g,`<span 
        style="display: inline-block; 
        background-color: hsl(var(--money)); 
        color: hsl(var(--money-foreground));
        padding: 0 4px; 
        border: 1px hsl(var(--money-foreground)) solid; 
        transform: translateZ(5px); 
        font-family: Changa, sans-serif;"
      >
        $1
      </span>`)}function se(e,a){return e.replace(/@cumul/g,`<span style="color: #f59e0b; font-weight: bold">${a}</span>`).replace(/@s/g,a>1?"s":"")}async function w(e=500){return new Promise(a=>setTimeout(a,e))}function S(e,a=1){for(let t=0;t<a;t++)e.sort(()=>Math.random()-.5);return e}function J(e,a,t,s,n,o=!1){const i=(e-a)/(t-a)*(n-s)+s;return o?s<n?Math.max(Math.min(i,n),s):Math.max(Math.min(i,s),n):i}function G(e){return e.image!==void 0}const Y=re.filter(e=>e.type==="support"),K=re.filter(e=>e.type==="action");function oe(){const e=W.map((n,o)=>{const i=J(o,0,W.length,0,Y.length,!0),c=Y[Math.floor(i)];return{...n,logo:`images/techno/${n.logo}`,state:"idle",effect:{...c,description:N(c.description)}}}),a=X.map((n,o)=>{const i=J(o,0,X.length,0,K.length,!0),c=K[Math.floor(i)];return{...n,image:`images/projects/${n.image}`,state:"idle",effect:{...c,description:N(c.description)}}}),t=ne.map(n=>({name:n.name,image:`images/upgrades/${n.image}`,state:"idle",effect:{upgrade:!0,ephemeral:!n.cumulable,description:N(`@upgrade <br/> ${se(n.description,1)}`),onPlayed:async o=>await o.upgrade(n.name),type:"action",cost:n.cost}})),s=S([...e,...a,...t],3);return{score:0,reason:null,isWon:!1,isGameOver:!1,deck:s.slice(7),hand:s.slice(0,7),discard:[],upgrades:[],nextCardModifiers:[],day:1,energy:P,reputation:E,money:0}}function Pe(e,a){return{updateScore:()=>{e(t=>({score:Math.max(0,t.reputation*100+t.money*100+t.upgrades.reduce((s,n)=>s+n.cumul,0)*100+t.energy*50-t.day*75)}))},addEnergy:async t=>{f.gain.play(),e(s=>({energy:Math.max(0,Math.min(P,s.energy+t))}))},addReputation:async(t,s)=>{if(t===10?f.powerUp.play():t>0?f.gain.play():f.loss.play(),e(o=>({reputation:Math.max(0,Math.min(E,o.reputation+t))})),await w(),s!=null&&s.skipGameOverCheck)return;const n=a();n.isGameOver||n.reputation===0&&(f.defeat.play(),f.music.fade(.7,0,1e3),e({isGameOver:!0,isWon:!1,reason:"reputation"}))},addMoney:async t=>{t>0&&f.cashing.play(),e(n=>({money:n.money+t})),await w(),a().money>=_&&(f.victory.play(),e({isGameOver:!0,isWon:!0}))},addDay:async(t=1)=>{if(e(s=>({day:s.day+t})),t>0){const s=a();for(let n=0;n<t;n++)s.triggerUpgradeEvent("eachDay")}},upgrade:async t=>{const s=ne.find(o=>o.name===t);f.upgrade.play();let n=a();if(n.upgrades.find(o=>o.name===t)?e(o=>({upgrades:o.upgrades.map(i=>i.name===t?{...i,cumul:i.cumul+1}:i)})):e(o=>({upgrades:[...o.upgrades,{...s,state:"appear",cumul:1,max:s.cumulable?s.max??1/0:1}]})),s.cumulable&&s.max){n=a();const o=n.upgrades.find(i=>i.name===t);if(o.cumul===o.max){const i=n.hand.find(c=>c.effect.upgrade&&c.name===t);e({hand:n.hand.map(c=>c.name===i.name?{...c,state:"played"}:c)}),await w(),e({hand:n.hand.filter(c=>c.name!==i.name)})}}await w(),e(o=>({upgrades:o.upgrades.map(i=>i.name===t?{...i,state:"idle"}:i)}))},triggerUpgrade:async t=>{const s=a(),n=s.upgrades.find(o=>o.name===t);e(o=>({upgrades:o.upgrades.map(i=>i.name===n.name?{...i,state:"triggered"}:i)})),await w(),await n.onTrigger(s,n),await w(),e(o=>({upgrades:o.upgrades.map(i=>i.name===n.name?{...i,state:"idle"}:i)}))},triggerUpgradeEvent:async t=>{const s=a();await Promise.all(s.upgrades.slice().filter(n=>n.triggerEvent===t&&(!n.condition||n.condition(s,n))).map(async(n,o)=>{await w(250*o),await s.triggerUpgrade(n.name)}))},addNextCardModifier:async(t,s)=>{f.powerUp.play(),e(n=>({nextCardModifiers:s!=null&&s.before?[t,...n.nextCardModifiers]:[...n.nextCardModifiers,t]}))},draw:async(t=1,s)=>{e(n=>{const o=s!=null&&s.fromDiscardPile?"discard":"deck",i=n.hand.slice(),c=n.discard.slice(),l=n[o].slice().filter(p=>s!=null&&s.filter?s.filter(p):!0),h=[];let x=!1,m=!1;for(let p=0;p<t&&l.length!==0;p++){const y=l.pop();y.state="drawn",h.push(y.name),i.length-1>=ae?(c.push(y),m=!0):(i.push(y),x=!0)}return x?f.draw.play():m&&f.draw.play(),{hand:i,discard:c,[o]:S(n[o].filter(p=>!h.includes(p.name)),2)}}),await w(),e(n=>({hand:n.hand.map(o=>({...o,state:"idle"}))}))},drop:async t=>{const s=t!=null&&t.toDeck?"deck":"discard";f.drop.play();const n=a(),o=n.hand.slice().filter(l=>l.state==="idle"),i=Math.floor(Math.random()*o.length),c=o[i];e({hand:n.hand.map(l=>l.name===c.name?{...l,state:"dropped"}:l)}),await w(),e(l=>({hand:l.hand.filter(h=>h.name!==c.name),[s]:S([{...c,state:null},...l[s]],2)}))},dropAll:async t=>{const s=t!=null&&t.toDeck?"deck":"discard";f.drop.play();const n=a();e({hand:n.hand.map(o=>o.state==="idle"&&(!(t!=null&&t.filter)||t.filter(o))?{...o,state:"dropped"}:o)}),await w(),e(o=>({[s]:S([...o.hand.filter(i=>!(t!=null&&t.filter)||t.filter(i)).map(i=>({...i,state:null})),...o[s]],2),hand:o.hand.filter(i=>(t==null?void 0:t.filter)&&!t.filter(i))}))},recycle:async(t=1)=>{f.recycle.play();const s=a(),n=s.discard.slice(),o=s.deck.slice(),i=[];for(let c=0;c<t&&n.length!==0;c++){const l=n.pop();i.push(l.name),o.push(l)}e({deck:S(o),discard:s.discard.filter(c=>!i.includes(c.name))})},play:async(t,s)=>{const n=!!(s!=null&&s.free);let o=a();const i=async()=>{f.unauthorized.play(),e({hand:o.hand.map(m=>m.name===t.name?{...m,state:"unauthorized"}:m)}),await w(),e({hand:o.hand.map(m=>m.name===t.name?{...m,state:"idle"}:m)})};if(t.effect.condition&&!t.effect.condition(o,t)){await i();return}if(!n){const{needs:m,cost:p}=L(o,t);if(o[m]<p)if(m==="energy"){if(o.reputation+o.energy<p){await i();return}const y=p-o.energy;e({energy:0}),await o.addReputation(-y,{skipGameOverCheck:!0})}else{await i();return}else e({[m]:o[m]-p})}f.play.play();const c=async()=>{e(m=>({nextCardModifiers:[],hand:m.hand.map(p=>p.name===t.name?{...p,state:"played"}:p)})),await w(),e(m=>({discard:t.effect.ephemeral?m.discard:S([{...t,state:null},...m.discard],3),hand:m.hand.filter(p=>p.name!==t.name)})),t.effect.type==="action"&&await o.addDay()},l=async()=>{t.effect.waitBeforePlay&&await w(),await t.effect.onPlayed(o,t),o.updateScore()};if(await Promise.all([c(),l()]),o=a(),o.isGameOver)return;if(o.reputation===0){f.defeat.play(),f.music.fade(.7,0,1e3),e({isGameOver:!0,isWon:!1,reason:"reputation"}),o.updateScore();return}o.hand.length===0&&await o.draw(),o=a();const h=o.deck.length===0&&o.hand.length===0,x=o.hand.every(m=>m.effect.condition&&!m.effect.condition(o,m)?!0:!L(o,m).canBeBuy);(h||x)&&(f.defeat.play(),f.music.fade(.7,0,1e3),e({isGameOver:!0,isWon:!1,reason:h?"mill":"soft-lock"})),o.updateScore()},reset:()=>{e(oe()),f.music.stop(),f.music.play()}}}const j=ye((e,a)=>({...oe(),...Pe(e,a)})),Ee=e=>{const a=j(s=>s.reset),t=T(s=>()=>s.setCardGameVisibility(!1));return r.jsx("div",{className:d("absolute bottom-0 left-1/2 -translate-x-1/2 transition-[bottom] duration-500 ease-in-out",{"-bottom-12":e.show,"delay-500":e.delay}),children:r.jsxs("div",{className:"flex gap-2",children:[r.jsx(C,{onClick:()=>t(),variant:"default",children:"Revenir à l'accueil"}),r.jsx(C,{onClick:()=>a(),variant:"default",children:"Recommencer"})]})})};function ze(e,a=[]){let t=[];function s(o,i){const c=v.createContext(i),l=t.length;t=[...t,i];function h(m){const{scope:p,children:y,...b}=m,z=(p==null?void 0:p[e][l])||c,$=v.useMemo(()=>b,Object.values(b));return r.jsx(z.Provider,{value:$,children:y})}function x(m,p){const y=(p==null?void 0:p[e][l])||c,b=v.useContext(y);if(b)return b;if(i!==void 0)return i;throw new Error(`\`${m}\` must be used within \`${o}\``)}return h.displayName=o+"Provider",[h,x]}const n=()=>{const o=t.map(i=>v.createContext(i));return function(c){const l=(c==null?void 0:c[e])||o;return v.useMemo(()=>({[`__scope${e}`]:{...c,[e]:l}}),[c,l])}};return n.scopeName=e,[s,$e(n,...a)]}function $e(...e){const a=e[0];if(e.length===1)return a;const t=()=>{const s=e.map(n=>({useScope:n(),scopeName:n.scopeName}));return function(o){const i=s.reduce((c,{useScope:l,scopeName:h})=>{const m=l(o)[`__scope${h}`];return{...c,...m}},{});return v.useMemo(()=>({[`__scope${a.scopeName}`]:i}),[i])}};return t.scopeName=a.scopeName,t}var Ge=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],ie=Ge.reduce((e,a)=>{const t=v.forwardRef((s,n)=>{const{asChild:o,...i}=s,c=o?xe:a;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),r.jsx(c,{...i,ref:n})});return t.displayName=`Primitive.${a}`,{...e,[a]:t}},{}),A="Progress",O=100,[Re,it]=ze(A),[Le,De]=Re(A),ce=v.forwardRef((e,a)=>{const{__scopeProgress:t,value:s=null,max:n,getValueLabel:o=Te,...i}=e;(n||n===0)&&!F(n)&&console.error(Be(`${n}`,"Progress"));const c=F(n)?n:O;s!==null&&!Q(s,c)&&console.error(_e(`${s}`,"Progress"));const l=Q(s,c)?s:null,h=M(l)?o(l,c):void 0;return r.jsx(Le,{scope:t,value:l,max:c,children:r.jsx(ie.div,{"aria-valuemax":c,"aria-valuemin":0,"aria-valuenow":M(l)?l:void 0,"aria-valuetext":h,role:"progressbar","data-state":ue(l,c),"data-value":l??void 0,"data-max":c,...i,ref:a})})});ce.displayName=A;var le="ProgressIndicator",de=v.forwardRef((e,a)=>{const{__scopeProgress:t,...s}=e,n=De(le,t);return r.jsx(ie.div,{"data-state":ue(n.value,n.max),"data-value":n.value??void 0,"data-max":n.max,...s,ref:a})});de.displayName=le;function Te(e,a){return`${Math.round(e/a*100)}%`}function ue(e,a){return e==null?"indeterminate":e===a?"complete":"loading"}function M(e){return typeof e=="number"}function F(e){return M(e)&&!isNaN(e)&&e>0}function Q(e,a){return M(e)&&!isNaN(e)&&e<=a&&e>=0}function Be(e,a){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${a}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${O}\`.`}function _e(e,a){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${a}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${O} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var me=ce,Ae=de;const V=v.forwardRef(({barColor:e,className:a,value:t,...s},n)=>r.jsx(me,{ref:n,className:d("relative h-4 w-full overflow-hidden rounded-full bg-secondary",a),...s,children:r.jsx(Ae,{className:d("h-full w-full flex-1 transition-all",e,{"bg-primary":!e}),style:{transform:`translateX(-${100-(t||0)}%)`}})}));V.displayName=me.displayName;const pe=e=>{const a=j(t=>t.energy);return r.jsxs("div",{className:d("relative",e.className),style:e.style,children:[e.type==="energy"?!e.isCost||a>=e.value?r.jsx("img",{src:"images/energy-background.png",alt:"Energie background image",title:e.isCost?"Coût en énergie":"Energie",className:"pointer-events-auto",style:{scale:e.iconScale}}):a>0?r.jsx("img",{src:"images/enerputation-background.png",alt:"Energie background image",title:e.isCost?"Coût en énergie":"Energie",className:"pointer-events-auto",style:{scale:e.iconScale}}):r.jsx("img",{src:"images/reputation-background.png",alt:"Reputation background image",title:"Coût en réputation",className:"pointer-events-auto",style:{scale:e.iconScale}}):r.jsx("img",{src:"images/reputation-background.png",alt:"Reputation background image",title:"Réputation",className:"pointer-events-auto",style:{scale:e.iconScale}}),r.jsx("div",{className:d("absolute top-1/2 left-1/2 font-bold text-[1.8em] text-white pointer-events-none box-content",e.textColor),style:{transform:"translateX(-50%) translateY(-50%) translateZ(5px)"},children:e.value})]})},ee=e=>r.jsxs("div",{className:"flex items-center h-7 w-[250px]",children:[r.jsx(pe,{type:e.type,value:e.value,iconScale:e.iconScale,textColor:e.textColor,className:"absolute -translate-x-1/2 z-50 scale-50"}),r.jsx(V,{barColor:e.barColor,className:e.className,value:e.value/e.max*100})]});function Oe(e){return u.createElement("div",{...e,className:d("w-full h-full aspect-square text-foreground",e.className),style:e.style},u.createElement("svg",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",viewBox:"0 0 512 512",height:"100%",width:"100%",xmlns:"http://www.w3.org/2000/svg"},u.createElement("path",{d:"M225.814 32.316c-3.955-.014-7.922-.01-11.9.007-19.147.089-38.6.592-58.219 1.32l5.676 24.893c20.431-2.31 42.83-4.03 65.227-4.89 12.134-.466 24.194-.712 35.892-.65 35.095.183 66.937 3.13 87.77 11.202l8.908 3.454-3.977 8.685c-29.061 63.485-35.782 124.732-31.228 184.826 2.248-71.318 31.893-134.75 70.81-216.068-52.956-8.8-109.634-12.582-168.959-12.78zm28.034 38.79c-8.74.007-17.65.184-26.559.526-41.672 1.6-83.199 6.49-110.264 12.096 30.233 56.079 54.69 112.287 70.483 167.082a71.934 71.934 0 0 1 5.894.045c4.018.197 7.992.742 11.875 1.59-16.075-51.397-34.385-98.8-57.146-146.131l-5.143-10.694 11.686-2.068c29.356-5.198 59.656-7.21 88.494-7.219 1.922 0 3.84.007 5.748.024 18.324.16 35.984 1.108 52.346 2.535l11.054.965-3.224 10.617c-18.7 61.563-22.363 127.678-11.79 190.582.176.163.354.325.526.49 3.813-1.336 7.38-2.698 10.705-4.154-8.254-67.394-4.597-136.923 26.229-209.201-17.202-4.383-43.425-6.674-72.239-7.034a656.656 656.656 0 0 0-8.675-.05zm144.945 7.385c-30.956 65.556-52.943 118.09-56.547 174.803 20.038-66.802 58.769-126.685 102.904-165.158a602.328 602.328 0 0 0-46.357-9.645zM103.832 97.02c-18.76 3.868-37.086 8.778-54.812 15.562 8.626 7.48 24.22 21.395 43.14 39.889 8.708-8.963 17.589-17.818 26.852-25.87a1067.587 1067.587 0 0 0-15.18-29.581zm142.023 7.482c-13.62-.066-27.562.324-41.554 1.293-1.468 13.682-9.56 26.482-19.225 39.07 15.431 36.469 28.758 73.683 40.756 113.194 18.375 5.42 36.554 11.827 51.28 19.504-5.47-42.458-4.722-85.963 2.38-128.508-12.885-13.31-19.597-28.09-20.135-44.34a621.48 621.48 0 0 0-13.502-.213zm182.018 26.985c-24.73 29.3-46.521 65.997-61.37 105.912 27.264-38.782 60.79-69.032 96.477-90.4a1318.664 1318.664 0 0 0-35.107-15.512zm-300.74 11.959c-14.594 13.188-29.014 29.017-44.031 44.097 32.289 19.191 59.791 41.918 82.226 67.66 1.393-.526 2.8-.999 4.215-1.43-10.498-36.096-24.885-73.033-42.41-110.327zM360.52 268.198c-16.397 19.788-31.834 30.235-53.09 38.57 2.391 9.22-1.16 19.805-9.334 27.901-4.808 4.761-10.85 10.188-19.684 13.715a62.896 62.896 0 0 0 3.9 2.127c12.364 6.17 34.207 4.18 54.5-5.049 20.23-9.2 38.302-25.092 45-41.191 3.357-9.05.96-13.77-4.917-20.692-4.184-4.925-10.295-9.89-16.375-15.38zm-170.079.586c-10.715-.098-21.597 2.994-30.59 9.76-12.79 9.623-22.65 26.784-22.738 55.934v.2l-.01.2c-2.92 61.381 1.6 89.7 10.555 105.065 7.904 13.562 21.05 20.054 40.28 31.994.916-2.406 1.87-5.365 2.765-9.098 2.277-9.499 4.161-22.545 5.355-36.975 2.389-28.858 2.04-63.51-1.955-88.445l-2.111-13.19 13.016 2.995c31.615 7.273 49.7 8.132 60.2 6.28 10.502-1.854 14.061-5.523 20.221-11.624 5.79-5.732 5.682-7.795 4.456-11.021-1.227-3.227-6.149-8.545-14.5-13.633-16.703-10.176-45.085-19.611-71.614-26.647a53.988 53.988 0 0 0-13.33-1.795zm189.1 69.416c-10.013 9.754-22.335 17.761-35.277 23.647-20.983 9.542-44.063 13.907-63.211 7.553-6.76 2.516-10.687 5.407-12.668 7.8-2.718 3.284-2.888 5.7-1.967 9.16.92 3.46 3.665 7.568 7.059 10.524 3.393 2.956 7.426 4.492 8.959 4.564 46.794 2.222 67.046-11.207 92.277-26.783 7.358-4.542 10.174-13.743 9.469-22.931-.353-4.594-1.69-8.911-3.233-11.63a9.009 9.009 0 0 0-1.408-1.904zm-166.187 9.096c2.727 25.068 2.772 54.314.642 80.053-1.247 15.072-3.175 28.779-5.789 39.685-1.137 4.746-2.388 8.954-3.9 12.659l146.697-6.465c-1.656-6.149-3.344-12.324-5.031-18.502a127.004 127.004 0 0 1-17.24 4.424l.044.73-8.316.518c-5.121.614-10.452.953-15.983.992l-83.86 5.21 2.493-11.607c7.947-37.006 8.68-69.589 3.778-105.234a353.433 353.433 0 0 1-13.536-2.463zm31.972 4.684c3.948 31.933 3.473 62.41-2.406 95.2l19.264-1.196a39.44 39.44 0 0 1-6.1-14.778c-1.296-6.88-.575-14.538 3.926-20.87.199-.281.414-.55.627-.821-5.246-4.845-9.628-11.062-11.614-18.524-2.114-7.944-.794-17.67 5.497-25.27 2.079-2.51 4.592-4.776 7.543-6.816-2.61-2.08-4.898-4.285-6.874-6.582-3.064.021-6.345-.093-9.863-.343zm132.666 41.785c-23.456 14.253-49.81 27.876-96.41 25.664a26.402 26.402 0 0 1-4.518-.615c-1.233.553-1.891 1.256-2.382 1.947-.963 1.355-1.532 3.8-.909 7.113 1.248 6.627 7.525 13.889 13.37 14.569 41.385 4.813 69.979-8.726 87.341-24.477 8-7.258 8.068-11.9 6.89-16.951-.59-2.523-1.89-4.969-3.382-7.25zm-6.683 49.062a114.657 114.657 0 0 1-8.547 4.86c1.65 6.051 3.304 12.102 4.937 18.154l19.92-3.572c-5.14-4.387-9.162-8.954-12.39-13.496-1.442-2.029-2.713-4.001-3.92-5.946z"})))}function Ve(e){return u.createElement("div",{...e,className:d("w-full h-full aspect-square text-foreground",e.className),style:e.style},u.createElement("svg",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",viewBox:"0 0 24 24",height:"100%",width:"100%",xmlns:"http://www.w3.org/2000/svg"},u.createElement("path",{fill:"none",d:"M0 0h24v24H0z"}),u.createElement("path",{d:"M14.06 9.94 12 9l2.06-.94L15 6l.94 2.06L18 9l-2.06.94L15 12l-.94-2.06zM4 14l.94-2.06L7 11l-2.06-.94L4 8l-.94 2.06L1 11l2.06.94L4 14zm4.5-5 1.09-2.41L12 5.5 9.59 4.41 8.5 2 7.41 4.41 5 5.5l2.41 1.09L8.5 9zm-4 11.5 6-6.01 4 4L23 8.93l-1.41-1.41-7.09 7.97-4-4L3 19l1.5 1.5z"})))}function Ie(e){return u.createElement("div",{...e,className:d("w-full h-full aspect-square text-foreground",e.className),style:e.style},u.createElement("svg",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",viewBox:"0 0 512 512",height:"100%",width:"100%",xmlns:"http://www.w3.org/2000/svg"},u.createElement("path",{d:"M32 456a24 24 0 0 0 24 24h400a24 24 0 0 0 24-24V176H32zm80-238.86a9.14 9.14 0 0 1 9.14-9.14h109.72a9.14 9.14 0 0 1 9.14 9.14v109.72a9.14 9.14 0 0 1-9.14 9.14H121.14a9.14 9.14 0 0 1-9.14-9.14zM456 64h-55.92V32h-48v32H159.92V32h-48v32H56a23.8 23.8 0 0 0-24 23.77V144h448V87.77A23.8 23.8 0 0 0 456 64z"})))}function He(e){return u.createElement("div",{...e,className:d("w-full h-full aspect-square text-foreground",e.className),style:e.style},u.createElement("svg",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",viewBox:"0 0 16 16",height:"100%",width:"100%",xmlns:"http://www.w3.org/2000/svg"},u.createElement("path",{d:"m14.12 10.163 1.715.858c.22.11.22.424 0 .534L8.267 15.34a.6.6 0 0 1-.534 0L.165 11.555a.299.299 0 0 1 0-.534l1.716-.858 5.317 2.659c.505.252 1.1.252 1.604 0l5.317-2.66zM7.733.063a.6.6 0 0 1 .534 0l7.568 3.784a.3.3 0 0 1 0 .535L8.267 8.165a.6.6 0 0 1-.534 0L.165 4.382a.299.299 0 0 1 0-.535z"}),u.createElement("path",{d:"m14.12 6.576 1.715.858c.22.11.22.424 0 .534l-7.568 3.784a.6.6 0 0 1-.534 0L.165 7.968a.299.299 0 0 1 0-.534l1.716-.858 5.317 2.659c.505.252 1.1.252 1.604 0z"})))}function qe(e){return u.createElement("div",{...e,className:d("w-full h-full aspect-square text-foreground",e.className),style:e.style},u.createElement("svg",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",viewBox:"0 0 512 512",height:"100%",width:"100%",xmlns:"http://www.w3.org/2000/svg"},u.createElement("path",{fill:"none",d:"M337.46 240 312 214.54l-56 56-56-56L174.54 240l56 56-56 56L200 377.46l56-56 56 56L337.46 352l-56-56 56-56z"}),u.createElement("path",{fill:"none",d:"M337.46 240 312 214.54l-56 56-56-56L174.54 240l56 56-56 56L200 377.46l56-56 56 56L337.46 352l-56-56 56-56z"}),u.createElement("path",{d:"m64 160 29.74 282.51A24 24 0 0 0 117.61 464h276.78a24 24 0 0 0 23.87-21.49L448 160zm248 217.46-56-56-56 56L174.54 352l56-56-56-56L200 214.54l56 56 56-56L337.46 240l-56 56 56 56z"}),u.createElement("rect",{width:"448",height:"80",x:"32",y:"48",rx:"12",ry:"12"})))}const k=e=>r.jsxs("div",{children:[r.jsx(e.icon,{className:"h-full self-center"}),r.jsxs("span",{className:"inline-block whitespace-nowrap",children:[r.jsx("span",{children:e.name}),": ",e.value]})]}),ge=e=>{const a=j(t=>({money:t.money,score:t.score,day:t.day,deck:t.deck,discard:t.discard}));return r.jsxs("div",{className:d("flex flex-col gap-2 items-start *:flex *:items-baseline *:gap-2 *:h-20 text-6xl text-left",e.className),children:[r.jsx(k,{icon:Oe,name:"Dollars",value:r.jsx("span",{dangerouslySetInnerHTML:{__html:N(`${a.money}M$ ${e.verbose?`sur ${_}M$`:""}`)}})}),r.jsx(k,{icon:Ve,name:"Score",value:r.jsxs("span",{className:"text-upgrade font-changa",children:[a.score.toLocaleString("fr")," pts"]})}),r.jsx(k,{icon:Ie,name:"Jour",value:a.day}),e.verbose&&r.jsxs(r.Fragment,{children:[r.jsx(k,{icon:He,name:"Deck",value:a.deck.length}),r.jsx(k,{icon:qe,name:"Défausse",value:a.discard.length})]})]})},Ze=e=>{const[a,t]=u.useState(!0),[s,n]=u.useState(!1),o=j(i=>({energy:i.energy,reputation:i.reputation,reset:i.reset}));return u.useEffect(()=>{e.show?(n(!0),t(!1)):(t(!0),n(!1))},[e.show]),r.jsxs("div",{className:d("absolute top-20 left-3 -translate-x-[110%] transition-transform duration-500 ease-in-out",{"delay-500":s,"translate-x-0":e.show}),children:[r.jsx("div",{className:"absolute bg-upgrade shadow shadow-black/50 w-10 h-4 left-0 top-5 -translate-x-full"}),r.jsx("div",{className:"absolute bg-upgrade shadow shadow-black/50 w-10 h-4 left-0 bottom-5 -translate-x-full"}),r.jsx(Ee,{show:e.show,delay:a}),r.jsxs(B,{className:"space-y-2",children:[r.jsx("div",{className:"text-3xl text-center",children:"Game values"}),r.jsx(ee,{type:"energy",value:o.energy,max:P}),r.jsx(ee,{type:"reputation",value:o.reputation,max:E,barColor:"bg-pink-500"}),r.jsx(ge,{className:"*:h-6 text-lg",verbose:!0})]})]})},D=["Si vous n'avez plus de @reputation, vous perdez la partie.","Quand une carte est jouée, elle va dans la défausse.","Si vous ne pouvez plus jouer de carte, vous perdez la partie.","Les cartes @support sont importantes pour toujours avoir des cartes à jouer.","Certaines cartes coutent de l'argent pour être jouées.","Votre pioche est limitée. Jouez prudemment !","Chaque carte @action jouée ajoute un jour à la partie.","Les cartes @action ont une bannière bleue.","Lorsque vous n'avez plus d'@energy, vous consommez la @reputation.","Les cartes éphémères sont détruites après utilisation.","Les effets des @upgrades sont cumulables !","Vous ne pouvez pas avoir plus de MAX_HAND_SIZE cartes en main.","Les cartes piochées en trop sont défaussées à la place.","Le prix des cartes d'@upgrade augmente progressivement.","Si vous obtenez MONEY_TO_REACHM$, vous gagnez la partie."];function Ue(e){return u.createElement("div",{...e,className:d("w-full h-full aspect-square text-foreground",e.className),style:e.style},u.createElement("svg",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",viewBox:"0 0 512 512",height:"100%",width:"100%",xmlns:"http://www.w3.org/2000/svg"},u.createElement("path",{d:"M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 448c-110.532 0-200-89.431-200-200 0-110.495 89.472-200 200-200 110.491 0 200 89.471 200 200 0 110.53-89.431 200-200 200zm107.244-255.2c0 67.052-72.421 68.084-72.421 92.863V300c0 6.627-5.373 12-12 12h-45.647c-6.627 0-12-5.373-12-12v-8.659c0-35.745 27.1-50.034 47.579-61.516 17.561-9.845 28.324-16.541 28.324-29.579 0-17.246-21.999-28.693-39.784-28.693-23.189 0-33.894 10.977-48.942 29.969-4.057 5.12-11.46 6.071-16.666 2.124l-27.824-21.098c-5.107-3.872-6.251-11.066-2.644-16.363C184.846 131.491 214.94 112 261.794 112c49.071 0 101.45 38.304 101.45 88.8zM298 368c0 23.159-18.841 42-42 42s-42-18.841-42-42 18.841-42 42-42 42 18.841 42 42z"})))}const We=e=>{const[a,t]=u.useState(0);return r.jsx("div",{className:d("absolute top-0 left-0 -translate-y-full -translate-x-full transition-transform duration-500 ease-in-out w-fit","rounded-br-3xl bg-card/50 shadow shadow-black/50 border-8 border-upgrade border-t-0 border-l-0 p-4",{"translate-x-0 translate-y-0 cursor-pointer":e.show}),onClick:()=>t((a+1)%D.length),children:r.jsx("div",{className:"flex gap-2 items-center justify-start select-none",children:r.jsxs("div",{className:"flex items-center gap-2 pointer-events-auto",children:[r.jsx(Ue,{className:"h-6 cursor-pointer"}),r.jsx("span",{className:"whitespace-nowrap",dangerouslySetInnerHTML:{__html:N(D[a])}})]})})})},Xe=e=>{const a=j(t=>t.upgrades);return r.jsx("div",{className:d("absolute w-full -top-full left-0 transition-all ease-in-out duration-500 pointer-events-none",{"top-0":e.show&&a.length>0}),children:r.jsx("div",{className:d("mx-auto w-fit h-fit -translate-y-1/2 flex justify-center rounded-3xl border-8 border-t-0 border-upgrade bg-card/50 shadow shadow-black/50"),children:r.jsx("div",{className:"flex p-5 gap-10 relative shrink-0 w-max  translate-y-1/2",children:a.map((t,s)=>r.jsxs("div",{className:"group/upgrade shrink-0 relative",children:[r.jsx("img",{src:`images/upgrades/${t.image}`,alt:t.name,className:d("block object-cover w-16 h-16 aspect-square rounded-full pointer-events-auto cursor-pointer mx-auto ring-upgrade ring-4",{"animate-trigger":t.state==="triggered"})}),r.jsx("div",{className:"h-6 relative",children:r.jsxs("div",{className:"relative",children:[t.max!==1/0&&r.jsx(V,{className:"absolute -translate-y-2 w-full",barColor:"bg-upgrade",value:t.cumul/t.max*100}),r.jsx("div",{className:"absolute text-center font-changa left-0 -translate-y-3 aspect-square h-6 rounded-full bg-upgrade shadow shadow-black",children:t.cumul})]})}),r.jsxs(B,{className:"hidden group-hover/upgrade:block absolute left-1/2 bottom-0 translate-y-full -translate-x-1/2 w-max max-w-[300px]",children:[r.jsxs("h3",{className:"text-xl",children:[t.name," ",r.jsxs("span",{className:"text-upgrade font-bold",children:[t.cumul,t.max!==1/0?`/${t.max}`:""]})]}),r.jsx("p",{dangerouslySetInnerHTML:{__html:N(se(t.description,t.cumul))}})]})]},s))})})})},fe=[{name:"ฟ- ק𝖆†/⑳ -ж",score:38120},{name:"Ghom",score:37980},{name:"Makushi",score:44e3},{name:"Xibalba",score:24050}],te={transformStyle:"preserve-3d"},he=({max:e=20,reverse:a=!1,scale:t=1,perspective:s=1e3,className:n="",children:o,style:i})=>{const c=v.useRef(null),l=ve(c),[h,x]=v.useState({}),m=v.useCallback(y=>{if(c.current){const b=c.current.getBoundingClientRect(),z=y.clientX-b.left,$=y.clientY-b.top,I=b.width/2,H=b.height/2,q=($-H)/H*e,Z=(z-I)/I*e;x({...te,transform:`
            perspective(${s}px)
            rotateX(${a?q:-q}deg)
            rotateY(${a?-Z:Z}deg)
            scale(${t})
          `})}},[e,s,a,t]),p=v.useCallback(()=>{x({...te,transition:"transform 0.5s ease-in-out",transform:"scale(1)"})},[]);return v.useEffect(()=>{const y=c.current;return l?y&&(y.addEventListener("mousemove",m),y.addEventListener("mouseleave",p)):p(),()=>{y&&(y.removeEventListener("mousemove",m),y.removeEventListener("mouseleave",p)),p()}},[e,a,t,s,l]),r.jsx("div",{ref:c,className:d("will-change-transform",n),style:{...h,...i},children:o})},Je=e=>{const a=T(n=>n.setCardGameVisibility),t=j(n=>({isGameOver:n.isGameOver,isWon:n.isWon,reason:n.reason,score:n.score,reset:n.reset})),s=fe.sort((n,o)=>o.score-n.score).findIndex(({score:n})=>t.score>=n);return r.jsx("div",{className:d("absolute w-full",e.show?"block":"hidden"),children:t.isGameOver&&r.jsx("div",{className:"absolute top-0 left-0 w-screen h-screen flex flex-col items-center justify-center bg-background/90 z-40 pointer-events-auto",children:r.jsxs("div",{className:"flex flex-col items-center justify-center gap-7",children:[r.jsxs(he,{className:"flex flex-col select-none",max:10,reverse:!0,children:[r.jsx("div",{className:"font-amsterdam capitalize text-9xl w-fit",children:"Game Over"}),r.jsxs("div",{className:"*:text-7xl *:whitespace-nowrap *:font-amsterdam text-center",children:[t.isWon&&r.jsx("div",{className:"text-green-500",children:"Vous avez gagné !"}),!t.isWon&&r.jsx("div",{className:"text-red-500",children:"Vous avez perdu !"})]})]}),t.reason&&r.jsx("p",{className:"text-4xl",children:{reputation:"Vous avez utilisé toute votre jauge de réputation...",mill:"Vous n'avez plus de carte...","soft-lock":"Votre main est injouable..."}[t.reason]}),t.isWon?r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsx(ge,{className:"*:h-10 text-3xl"}),r.jsx("div",{className:"p-5 space-y-2 rounded-2xl bg-background shadow-md shadow-foreground/20",children:s>=0?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"text-3xl",children:["Rank:"," ",r.jsxs("span",{className:d("font-changa text-4xl",R(s)),children:["# ",s+1]})]}),r.jsxs("p",{className:"text-lg",children:[r.jsx("a",{href:"https://www.linkedin.com/in/camille-abella-a99950176/",target:"_blank",className:"text-upgrade font-changa hover:underline",children:"Contactez-moi"})," ","pour ",r.jsx("br",{})," soumettre votre score !"]})]}):r.jsxs("div",{className:"text-lg",children:["Vous n'êtes pas classé, ",r.jsx("br",{})," votre score est trop faible. ",r.jsx("br",{})," essayez de nouveau !"]})})]}):r.jsx("div",{className:"text-lg group/helpers",children:D.filter(n=>{switch(t.reason){case"reputation":return n.includes("@reputation")||n.includes("gagnez la partie");case"mill":return n.includes("plus jouer")||n.includes("défausse")||n.includes("limitée")||n.includes("gagnez la partie");case"soft-lock":return n.includes("plus jouer")||n.includes("progressivement")||n.includes("cartes à jouer")||n.includes("gagnez la partie");default:return!1}}).map((n,o)=>r.jsx("div",{className:"transition-transform duration-500 ease-in-out transform hover:scale-110",children:r.jsx("p",{className:d("animate-trigger hover:text-foreground",{"delay-0":o===0,"delay-100":o===1,"delay-200":o===2,"delay-300":o===3,"delay-400":o===4}),dangerouslySetInnerHTML:{__html:N(n)}},o)}))}),r.jsxs("div",{className:"flex gap-4",children:[r.jsx(C,{onClick:()=>a(!1),variant:t.isWon&&s!==-1?"opaque":"default",children:"Quitter"}),r.jsx(C,{onClick:()=>t.reset(),variant:t.isWon?s===-1?"opaque":"default":"cta",size:t.isWon?"default":"cta",children:"Recommencer"}),t.isWon&&r.jsx("div",{className:"animate-bounce",children:r.jsx("a",{href:"https://buymeacoffee.com/ghom",target:"_blank",className:we({variant:"cta",size:"cta"}),children:"Buy me a coffee ☕️"})})]})]})})})};function Ye(e){return u.createElement("div",{...e,className:d("w-full h-full aspect-square text-foreground",e.className),style:e.style},u.createElement("svg",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",viewBox:"0 0 512 512",height:"100%",width:"100%",xmlns:"http://www.w3.org/2000/svg"},u.createElement("path",{d:"M464 256h-80v-64c0-35.3 28.7-64 64-64h8c13.3 0 24-10.7 24-24V56c0-13.3-10.7-24-24-24h-8c-88.4 0-160 71.6-160 160v240c0 26.5 21.5 48 48 48h128c26.5 0 48-21.5 48-48V304c0-26.5-21.5-48-48-48zm-288 0H96v-64c0-35.3 28.7-64 64-64h8c13.3 0 24-10.7 24-24V56c0-13.3-10.7-24-24-24h-8C71.6 32 0 103.6 0 192v240c0 26.5 21.5 48 48 48h128c26.5 0 48-21.5 48-48V304c0-26.5-21.5-48-48-48z"})))}function Ke(e){return u.createElement("div",{...e,className:d("w-full h-full aspect-square text-foreground",e.className),style:e.style},u.createElement("svg",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",viewBox:"0 0 512 512",height:"100%",width:"100%",xmlns:"http://www.w3.org/2000/svg"},u.createElement("path",{d:"M464 32H336c-26.5 0-48 21.5-48 48v128c0 26.5 21.5 48 48 48h80v64c0 35.3-28.7 64-64 64h-8c-13.3 0-24 10.7-24 24v48c0 13.3 10.7 24 24 24h8c88.4 0 160-71.6 160-160V80c0-26.5-21.5-48-48-48zm-288 0H48C21.5 32 0 53.5 0 80v128c0 26.5 21.5 48 48 48h80v64c0 35.3-28.7 64-64 64h-8c-13.3 0-24 10.7-24 24v48c0 13.3 10.7 24 24 24h8c88.4 0 160-71.6 160-160V80c0-26.5-21.5-48-48-48z"})))}const Fe=e=>r.jsx("div",{className:d("text-2xl font-bold border border-white px-1 bg-money text-money-foreground",e.className),style:e.style,children:r.jsxs("div",{style:{transform:"translateZ(5px)"},children:[e.value,"M$"]})}),Qe=e=>{const{handSize:a,isAnyCardAnimated:t,isGameOver:s,play:n,canTriggerEffect:o,parsedCost:i}=j(l=>{const h=L(l,e.card);return{handSize:l.hand.length,isAnyCardAnimated:l.hand.some(x=>x.state!=="idle")||l.upgrades.length>0&&l.upgrades.some(x=>x.state!=="idle"),play:l.play,isGameOver:l.isGameOver,parsedCost:h,canTriggerEffect:!e.card.effect.condition||e.card.effect.condition(l,e.card)}}),c=e.position-(a-1)/2;return r.jsx("div",{className:d("game-card","relative w-[calc(630px/3)] h-[calc(880px/3)]","transition-transform hover:-translate-y-14","-mx-3.5 z-10 hover:z-20 cursor-pointer select-none",e.card.state,{grayscale:s||!i.canBeBuy||!o,"cursor-not-allowed":t}),onClick:async()=>{!t&&!s&&await n(e.card)},onContextMenu:l=>{l.preventDefault(),G(e.card)&&e.card.url&&window.open(e.card.url,"_blank")},style:{marginBottom:`${20-Math.abs(c)*5}px`,rotate:`${c*2}deg`,transitionDuration:"0.3s",transitionTimingFunction:"ease-in-out"},children:r.jsxs(he,{scale:1.1,className:d("group/game-card transition-shadow duration-200 ease-in-out","hover:shadow-glow-20","flex flex-col w-full h-full rounded-md","rounded-md *:shrink-0 shadow-primary",{"bg-card/80":e.card.effect.type==="support"}),children:[G(e.card)&&e.card.detail&&r.jsxs("div",{className:d("absolute pointer-events-none left-1/2 -top-[10px] -translate-x-1/2 -translate-y-full rounded-2xl bg-card","p-2 w-max max-w-full shadow shadow-action","transition-opacity duration-200 ease-in-out delay-1000 opacity-0 group-hover/game-card:opacity-100","flex gap-1"),children:[r.jsx(Ye,{className:"w-10"}),r.jsx("div",{className:"flex-grow text-sm text-left",children:e.card.detail}),r.jsx(Ke,{className:"w-10 self-end"})]}),r.jsxs("div",{className:d("relative flex justify-start items-center h-10 rounded-t-md",{"bg-action":e.card.effect.type==="action","bg-support/50":e.card.effect.type==="support"}),style:{transformStyle:"preserve-3d"},children:[r.jsx("div",{className:"font-changa shrink-0 relative",style:{transform:"translateZ(5px) translateX(-15px)",transformStyle:"preserve-3d"},children:i.needs==="energy"?r.jsx(pe,{isCost:!0,type:"energy",value:i.cost,iconScale:"0.75",style:{transform:"translateZ(5px)",transformStyle:"preserve-3d"}}):r.jsx(Fe,{value:String(i.cost),style:{transform:"translateZ(10px) rotate(-10deg)",transformStyle:"preserve-3d"}})}),r.jsx("h2",{className:d("absolute left-0 w-full text-center whitespace-nowrap overflow-hidden text-ellipsis shrink-0 flex-grow text-xl font-changa",{"left-3 text-lg":i.needs==="money"&&e.card.name.length>7,"left-7":i.needs==="money"&&i.cost>99,"text-md":e.card.name.length>11,"text-action-foreground":e.card.effect.type==="action","text-support-foreground":e.card.effect.type==="support"}),style:{transform:"translateZ(5px)"},children:e.card.name})]}),G(e.card)?r.jsx(et,{card:e.card}):r.jsx(at,{card:e.card}),r.jsxs("div",{className:d("flex-grow rounded-b-md",e.card.effect.type==="action"&&"bg-card/80"),style:{transformStyle:"preserve-3d"},children:[r.jsx("p",{className:"py-[10px] px-[15px] text-center",style:{transform:"translateZ(10px)",transformStyle:"preserve-3d"},dangerouslySetInnerHTML:{__html:e.card.effect.description}}),e.card.effect.ephemeral&&r.jsx("div",{className:"text-center h-full text-2xl text-muted-foreground/30 font-bold",children:"Éphémère"})]}),r.jsx(U,{groupName:"game-card",appearOnHover:!0,disappearOnCorners:!0}),r.jsx(U,{groupName:"game-card",appearOnHover:!0,disappearOnCorners:!0,opposed:!0})]})})},et=e=>r.jsxs("div",{className:"group/image",style:{transformStyle:"preserve-3d"},children:[r.jsx("div",{className:d("inset-shadow","relative flex justify-center items-center"),style:{transformStyle:"preserve-3d"},children:r.jsx("img",{src:e.card.image,alt:`Illustration du projet "${e.card.name}"`,className:"w-full aspect-video object-cover",style:{transform:"translateZ(-15px)"}})}),e.card.description&&r.jsx("div",{className:d("transition-opacity duration-1000 group-hover/image:opacity-0","absolute bottom-0 w-full h-1/3 bg-background/50","flex justify-center items-center"),style:{transform:"translateZ(-5px)"},children:r.jsxs("p",{className:"text-sm text-center",children:['"',e.card.description,'"']})})]}),tt=["React","Knex"],at=e=>r.jsx(r.Fragment,{children:r.jsx("div",{className:"flex justify-center items-center mt-4",style:{transform:"translateZ(20px)"},children:r.jsx("img",{src:e.card.logo,alt:`Logo de la techno "${e.card.name}"`,className:d("w-2/3 object-contain aspect-square",{"group-hover/game-card:animate-spin-forward":tt.includes(e.card.name)})})})});function rt(e){return u.createElement("div",{...e,className:d("w-full h-full aspect-square text-foreground",e.className),style:e.style},u.createElement("svg",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",viewBox:"0 0 512 512",height:"100%",width:"100%",xmlns:"http://www.w3.org/2000/svg"},u.createElement("path",{d:"M399.9 80V32H112v48H32v38c0 32 9.5 62.79 26.76 86.61 13.33 18.4 34.17 31.1 52.91 37.21 5.44 29.29 20.2 57.13 50.19 79.83 22 16.66 48.45 28.87 72.14 33.86V436h-74v44h192v-44h-74v-80.49c23.69-5 50.13-17.2 72.14-33.86 30-22.7 44.75-50.54 50.19-79.83 18.74-6.11 39.58-18.81 52.91-37.21C470.5 180.79 480 150 480 118V80zM94.4 178.8c-10.68-14.68-17.17-34.4-18.24-54.8H112v67.37c-3.94-1.14-12.92-6.12-17.6-12.57zm323.2 0c-4.6 6.61-11.6 12.58-17.6 12.58 0-22.4 0-46.29-.05-67.38h35.9c-1.08 20.4-7.85 39.9-18.25 54.8z"})))}const nt=e=>r.jsxs("div",{className:d("absolute right-3 top-16","w-fit translate-x-[110%] transition-transform duration-500 ease-in-out",{"translate-x-0":e.show}),children:[r.jsx("div",{className:"absolute bg-upgrade shadow shadow-black/50 w-10 h-4 right-0 top-5 translate-x-full"}),r.jsx("div",{className:"absolute bg-upgrade shadow shadow-black/50 w-10 h-4 right-0 bottom-5 translate-x-full"}),r.jsx(B,{children:r.jsxs("div",{className:"space-y-3 pointer-events-auto flex flex-col items-center",children:[r.jsx("div",{className:"text-3xl",children:"Scoreboard"}),r.jsx("table",{children:r.jsx("tbody",{children:fe.sort((a,t)=>t.score-a.score).map((a,t)=>r.jsxs("tr",{className:d("*:whitespace-nowrap",R(t)),children:[r.jsx("td",{children:t<3?r.jsx(rt,{className:d("w-4",R(t))}):""}),r.jsxs("th",{children:["# ",t+1]}),r.jsx("th",{className:"text-left",children:a.name}),r.jsxs("td",{children:[a.score.toLocaleString()," pts"]})]},t))})}),r.jsxs("p",{className:"text-muted-foreground text-sm bg-muted py-1 px-2 rounded-md whitespace-nowrap",children:["Si vous avez un meilleur score, vous pouvez me le ",r.jsx("br",{}),"soumettre en me contactant sur Discord ou LinkedIn !"]})]})})]}),ct=()=>{const e=j(),a=T(t=>t.isCardGameVisible);return r.jsxs(r.Fragment,{children:[r.jsx(We,{show:a}),r.jsx(Xe,{show:a}),r.jsx(nt,{show:a}),r.jsx(Ze,{show:a}),r.jsx(Je,{show:a}),r.jsx("div",{className:d("absolute flex items-center -translate-x-1/2 max-w-[100vw]","left-[50vw] transition-[bottom] ease-in-out duration-1000",a?"bottom-[-50px]":"-bottom-full"),children:e.hand.sort((t,s)=>{const n=t.effect.type==="action"?1:0,o=s.effect.type==="action"?1:0,i=typeof t.effect.cost=="string"?1:0,c=typeof s.effect.cost=="string"?1:0,l=Number(t.effect.cost),h=Number(s.effect.cost),x=t.effect.description.localeCompare(s.effect.description);return n-o||i-c||l-h||x}).map((t,s)=>r.jsx(Qe,{card:t,position:s},s))})]})};export{ct as Game};
