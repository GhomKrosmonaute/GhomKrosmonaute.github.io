import{r as reactExports,j as jsxRuntimeExports,a as React}from"./react-spline-Gm59yu5V.js";import{b as bank}from"./sound-BzGU-ySK.js";import{a as create,b as useHover,c as cn,B as BorderLight,S as Slot,d as useNavigate,e as Button,u as useGlobalState,f as useMediaQuery}from"./index-B9Ae-EOP.js";const projects=[{name:"Bot.ts",image:"bot.ts.png",description:"TypeScript framework for building Discord bots",detail:"Includes a CLI for generating new bots and bot files, actually my biggest project",url:"https://ghom.gitbook.io/bot.ts"},{name:"CRISPR-Crunch",image:"crispr-crunch.png",description:"Puzzle game about gene editing",detail:"Made in TypeScript with PixiJS and Booyah with the PlayCurious team",url:"https://playcurious.games/our-games/crispr-crunch"},{name:"Portfolio",image:"portfolio.png",description:"My personal portfolio with a card game",detail:"Made in TypeScript with React, Vite, Tailwind CSS, Zustand and a lot of passion"},{name:"Les Labs JS",image:"js-labs.png",description:"A Discord server for JavaScript developers I own and manage",detail:"The best place to learn and share about the JavaScript ecosystem",url:"https://discord.gg/3vC2XWK"},{name:"2D Shooter",image:"shooter.png",description:"My first game in TypeScript",detail:'A simple 2D shooter game with a spaceship and enemies made with p5.js (click "Play offline" for test)',url:"https://github.com/GhomKrosmonaute/TypedShooterGame"},{name:"Gario",image:"gario.png",description:"A 2D platformer game for showcase",detail:"A simple 2D platformer game with a character, a level, a life system and a checkpoint system made with p5.js in TypeScript",url:"https://github.com/GhomKrosmonaute/Gario"},{name:"Booyah",image:"booyah.png",description:"A TypeScript game engine",detail:"A powerful game engine using state machines made in TypeScript by Jesse Himmelstein and forked and improved by me",url:"https://github.com/GhomKrosmonaute/Booyah"},{name:"Nano",image:"nano.png",description:"TypeScript library for building modular Discord bots",detail:"You can use this lib for building Discord bots with a modular and flexible architecture",url:"https://github.com/NanoWorkspace"},{name:"Sea Rescue",image:"sea-rescue.png",description:"3D game about ocean cleaning",detail:"Made with TypeScript, Three.js and Booyah with the PlayCurious team",url:"https://playcurious.games/our-games/sea-rescue/"},{name:"Site Photographe",image:"photo.png",description:"A website for a photographer",detail:"Made with Next.js, TypeScript, React and Tailwind CSS. Optimized for search engines and performance, including a CMS"}],technos=[{name:"TypeScript",logo:"ts.png"},{name:"React",logo:"react.webp"},{name:"Tailwind CSS",logo:"tailwind.png"},{name:"NodeJS",logo:"node.png"},{name:"Vercel",logo:"vercel.png"},{name:"Next.js",logo:"nextjs.webp"},{name:"PostgreSQL",logo:"pgsql.png"},{name:"Docker",logo:"docker.webp"},{name:"PixiJS",logo:"pixi.png"},{name:"Three.js",logo:"three.png"},{name:"Gulp",logo:"gulp.webp"},{name:"Knex",logo:"knex.png"},{name:"Git",logo:"git.png"}],effects=[{description:"Gagne 10M$",onPlayed:"await state.addMoney(10)",type:"action",cost:2},{description:"Gagne 20M$",onPlayed:"await state.addMoney(20)",type:"action",cost:4},{description:"Le matin, gagne 10M$. L'après-midi, gagne 2 @energys",onPlayed:"if (new Date().getHours() < 12) { await state.addMoney(10) } else { await state.addEnergy(2) }",type:"action",cost:0},{description:"Gagne 10M$ fois le nombre de cartes @action en main",onPlayed:"await state.addMoney(10 * (state.hand.filter(card => card.effect.type === 'action').length - 1))",type:"action",cost:4},{description:"Si le dark mode est activé, gagne 20M$",onPlayed:"await state.addMoney(20)",condition:'localStorage.getItem("theme") === "dark"',type:"action",cost:3},{description:"Pioche une carte",onPlayed:"await state.draw()",condition:"state.deck.length >= 1",type:"support",cost:1},{description:"Pioche 2 cartes",onPlayed:"await state.draw(2)",condition:"state.deck.length >= 2",type:"support",cost:2},{description:"Si tu as moins de 4 cartes en main, pioche 2 cartes",onPlayed:"await state.draw(2)",condition:"state.hand.length < 4 && state.deck.length >= 2",type:"support",cost:1},{description:"Pioche une carte @action",onPlayed:"await state.draw(1, { type: 'action' })",condition:"state.deck.some(card => card.effect.type === 'action')",type:"support",cost:2},{description:"Si tu n'as pas de carte @action en main, pioche une carte @action",onPlayed:"await state.draw(1, { type: 'action' })",condition:"state.hand.every(card => card.effect.type !== 'action') && state.deck.some(card => card.effect.type === 'action')",type:"support",cost:1},{description:"Défausse une carte aléatoire, pioche une carte et gagne 10M$",onPlayed:"await state.drop(); await state.draw(); await state.addMoney(10)",condition:"state.hand.length >= 2",type:"support",cost:0},{description:"Renvoie une carte aléatoire dans la pioche, pioche une carte",onPlayed:"await state.drop({ toDeck: true }); await state.draw()",condition:"state.hand.length >= 2",type:"support",cost:0},{description:"Défausse toutes les cartes en main, pioche 5 cartes",onPlayed:"await state.dropAll(); await state.draw(5)",type:"support",cost:0},{description:"Renvoie toutes les cartes en main dans la pioche, pioche 5 cartes",onPlayed:"await state.dropAll({ toDeck: true }); await state.draw(5)",type:"support",cost:3},{description:"Double l'@energy",onPlayed:"await state.addEnergy(state.energy)",type:"action",cost:"10"}],activities=[{name:"Starbucks",description:"Rend @cumul @energy@s par jour",image:"starbucks.png",onTrigger:"await state.addEnergy(activity.cumul)",cumulable:!0,cost:"20"},{name:"Méditation",description:"Pioche @cumul carte@s par jour",image:"meditation.png",onTrigger:"for (let i = 0; i < activity.cumul; i++) await state.draw()",cumulable:!0,max:3,cost:"20"},{name:"Bourse",description:"Gagne @cumulM$ fois le nombre de cartes en main par jour",image:"bourse.png",onTrigger:"await state.addMoney(activity.cumul * state.hand.length)",cumulable:!0,cost:"25"},{name:"Recyclage",description:"Place @cumul carte@s aléatoire@s de la défausse dans le deck par jour",image:"recyclage.png",onTrigger:"for (let i = 0; i < activity.cumul; i++) await state.recycle()",cumulable:!0,max:3,cost:"20"},{name:"I.A",description:"Gagne @cumulM$ fois le nombre de carte en défausse par jour",image:"ia.png",onTrigger:"await state.addMoney(activity.cumul * state.discard.length)",cumulable:!0,cost:"25"}],MAX_REPUTATION=10,MAX_ENERGY=20,MONEY_TO_REACH=200;function formatText(e){return e.replace(/MONEY_TO_REACH/g,String(MONEY_TO_REACH)).replace(/@action(\S*)/g,'<span style="color: #2563eb">Action$1</span>').replace(/@reputation(\S*)/g,'<span style="color: #d946ef">Réputation$1</span>').replace(/@activity(\S*)/g,'<span style="color: #f59e0b">Activité$1</span>').replace(/@support(\S*)/g,'<span style="background-color: hsla(var(--secondary) / 0.5); color: hsl(var(--secondary-foreground))">Support$1</span>').replace(/@energy(\S*)/g,'<span style="color: hsl(var(--primary))">Énergie$1</span>').replace(/(\d+M\$)/g,'<span style="display: inline-block; background-color: #022c22; color: white; padding: 0 4px;">$1</span>')}async function wait(){return new Promise(e=>setTimeout(e,500))}function shuffle(e,t=1){for(let n=0;n<t;n++)e.sort(()=>Math.random()-.5);return e}function map(e,t,n,r,a,i=!1){const s=(e-t)/(n-t)*(a-r)+r;return i?r<a?Math.max(Math.min(s,a),r):Math.max(Math.min(s,r),a):s}function isActionCardInfo(e){return e.image!==void 0}const supportEffects=effects.filter(e=>e.type==="support"),actionEffects=effects.filter(e=>e.type==="action");function generateInitialState(){const e=technos.map((a,i)=>{const s=map(i,0,technos.length,0,supportEffects.length,!0),o=supportEffects[Math.floor(s)];return{...a,logo:`images/techno/${a.logo}`,state:"idle",effect:{...o,description:formatText(o.description)}}}),t=projects.map((a,i)=>{const s=map(i,0,projects.length,0,actionEffects.length,!0),o=actionEffects[Math.floor(s)];return{...a,image:`images/projects/${a.image}`,state:"idle",effect:{...o,description:formatText(o.description)}}}),n=activities.map(a=>({name:a.name,image:`images/activities/${a.image}`,state:"idle",ephemeral:!a.cumulable,effect:{description:"Découvre une activité",onPlayed:`await state.discover("${a.name}")`,type:"action",cost:a.cost}})),r=shuffle([...e,...t,...n],3);return{reason:null,isWon:!1,isGameOver:!1,deck:r.slice(7),hand:r.slice(0,7),discard:[],activities:[],day:1,energy:MAX_ENERGY,reputation:MAX_REPUTATION,money:0}}const useCardGame=create((set,getState)=>({...generateInitialState(),addEnergy:async e=>{bank.gain.play(),set(t=>({energy:Math.max(0,Math.min(MAX_ENERGY,t.energy+e))}))},addReputation:async(e,t)=>{if(e>0?bank.gain.play():bank.loss.play(),set(r=>({reputation:Math.max(0,Math.min(MAX_REPUTATION,r.reputation+e))})),await wait(),t!=null&&t.skipGameOverCheck)return;const n=getState();n.isGameOver||n.reputation===0&&(bank.defeat.play(),set({isGameOver:!0,isWon:!1,reason:"reputation"}))},addMoney:async e=>{e>0&&bank.gain.play(),set(n=>({money:n.money+e})),await wait(),getState().money>=MONEY_TO_REACH&&(bank.victory.play(),set({isGameOver:!0,isWon:!0}))},addDay:async(e=1)=>{if(set(t=>({day:t.day+e})),e>0){const t=getState();for(let n=0;n<e;n++)for(const r of t.activities.slice())await t.triggerActivity(r.name)}},discover:async e=>{const t=activities.find(r=>r.name===e);bank.discover.play();let n=getState();if(n.activities.find(r=>r.name===e)?set(r=>({activities:r.activities.map(a=>a.name===e?{...a,cumul:a.cumul+1}:a)})):set(r=>({activities:[...r.activities,{...t,state:"appear",cumul:1,max:t.cumulable?t.max??1/0:1}]})),t.cumulable){n=getState();const r=n.activities.find(s=>s.name===e),a=`discover("${e}")`,i=n.hand.find(s=>s.effect.onPlayed.includes(a))||n.deck.find(s=>s.effect.onPlayed.includes(a))||n.discard.find(s=>s.effect.onPlayed.includes(a));i&&set(s=>({hand:s.hand.map(o=>o.name===i.name?{...o,ephemeral:t.max?r.cumul>=t.max-1:!1}:o)}))}await wait(),set(r=>({activities:r.activities.map(a=>a.name===e?{...a,state:"idle"}:a)}))},triggerActivity:async name=>{const state=getState(),activity=state.activities.find(e=>e.name===name);set(e=>({activities:e.activities.map(t=>t.name===activity.name?{...t,state:"triggered"}:t)})),await wait(),await eval(`(async () => {
      ${activity.onTrigger}
    })()`),set(e=>({activities:e.activities.map(t=>t.name===activity.name?{...t,state:"idle"}:t)}))},draw:async(e=1,t)=>{bank.draw.play(),set(n=>{const r=t!=null&&t.fromDiscardPile?"discard":"deck",a=n.hand.slice(),i=n[r].slice().filter(o=>t!=null&&t.type?o.effect.type===t.type:!0),s=[];for(let o=0;o<e&&i.length!==0;o++){const l=i.pop();l.state="drawn",s.push(l.name),a.push(l)}return{hand:a,[r]:shuffle(n[r].filter(o=>!s.includes(o.name)))}}),await wait(),set(n=>({hand:n.hand.map(r=>({...r,state:"idle"}))}))},drop:async e=>{const t=e!=null&&e.toDeck?"deck":"discard";bank.drop.play();const n=getState(),r=n.hand.slice().filter(s=>s.state==="idle"),a=Math.floor(Math.random()*r.length),i=r[a];set({hand:n.hand.map(s=>s.name===i.name?{...s,state:"dropped"}:s)}),await wait(),set(s=>({hand:s.hand.filter(o=>o.name!==i.name),[t]:shuffle([{...i,state:null},...s[t]],2)}))},dropAll:async e=>{const t=e!=null&&e.toDeck?"deck":"discard";bank.drop.play();const n=getState();set({hand:n.hand.map(r=>r.state==="idle"?{...r,state:"dropped"}:r)}),await wait(),set(r=>({[t]:shuffle([...r.hand.map(a=>({...a,state:null})),...r[t]],2),hand:[]}))},recycle:async(e=1)=>{bank.gain.play();const t=getState(),n=t.discard.slice(),r=t.deck.slice(),a=[];for(let i=0;i<e&&n.length!==0;i++){const s=n.pop();a.push(s.name),r.push(s)}set({deck:shuffle(r),discard:t.discard.filter(i=>!a.includes(i.name))})},play:async card=>{let state=getState();const cantPlay=async()=>{bank.unauthorized.play(),set({hand:state.hand.map(e=>e.name===card.name?{...e,state:"unauthorized"}:e)}),await wait(),set({hand:state.hand.map(e=>e.name===card.name?{...e,state:"idle"}:e)})};if(card.effect.condition&&!eval(card.effect.condition)){await cantPlay();return}const payWith=typeof card.effect.cost=="number"?"energy":"money",cost=Number(card.effect.cost);if(state[payWith]<cost)if(payWith==="energy"){if(state.reputation+state.energy<cost){await cantPlay();return}const e=cost-state.energy;set({energy:0}),await state.addReputation(-e,{skipGameOverCheck:!0})}else{await cantPlay();return}else set({[payWith]:state[payWith]-cost});bank.play.play();const thread1=async()=>{set(e=>({hand:e.hand.map(t=>t.name===card.name?{...t,state:"played"}:t)})),await wait(),set(e=>({discard:card.ephemeral?e.discard:shuffle([{...card,state:null},...e.discard],3),hand:e.hand.filter(t=>t.name!==card.name)})),card.effect.type==="action"&&await state.addDay()},thread2=async()=>{/^await state.draw(.*?)$/.test(card.effect.onPlayed)&&await wait(),await eval(`(async () => { ${card.effect.onPlayed} })()`)};if(await Promise.all([thread1(),thread2()]),state=getState(),state.isGameOver)return;if(state.reputation===0){bank.defeat.play(),set({isGameOver:!0,isWon:!1,reason:"reputation"});return}state.hand.length===0&&await state.draw(),state=getState();const isMill=state.deck.length===0&&state.hand.length===0,isSoftLocked=state.hand.every(c=>c.effect.condition&&!eval(c.effect.condition)||typeof c.effect.cost=="number"&&c.effect.cost>state.energy+state.reputation||typeof c.effect.cost=="string"&&Number(c.effect.cost)>state.money);(isMill||isSoftLocked)&&set({isGameOver:!0,isWon:!1,reason:isMill?"mill":"soft-lock"})},reset:()=>{set(generateInitialState()),bank.music.stop(),bank.music.play()}})),constantStyle={transformStyle:"preserve-3d"},Tilt=({max:e=20,reverse:t=!1,scale:n=1,perspective:r=1e3,className:a="",children:i,style:s})=>{const o=reactExports.useRef(null),l=useHover(o),[m,f]=reactExports.useState({}),p=reactExports.useCallback(u=>{if(o.current){const g=o.current.getBoundingClientRect(),x=u.clientX-g.left,h=u.clientY-g.top,y=g.width/2,v=g.height/2,w=(h-v)/v*e,j=(x-y)/y*e;f({...constantStyle,transform:`
            perspective(${r}px)
            rotateX(${t?w:-w}deg)
            rotateY(${t?-j:j}deg)
            scale(${n})
          `})}},[e,r,t,n]),d=reactExports.useCallback(()=>{f({...constantStyle,transition:"transform 0.5s ease-in-out",transform:"scale(1)"})},[]);return reactExports.useEffect(()=>{const u=o.current;return l?u&&(u.addEventListener("mousemove",p),u.addEventListener("mouseleave",d)):d(),()=>{u&&(u.removeEventListener("mousemove",p),u.removeEventListener("mouseleave",d)),d()}},[e,t,n,r,l]),jsxRuntimeExports.jsx("div",{ref:o,className:cn("will-change-transform",a),style:{...m,...s},children:i})},ValueIcon=e=>jsxRuntimeExports.jsxs("div",{className:cn("relative",e.className),style:e.style,children:[jsxRuntimeExports.jsx("img",{src:e.image,alt:`${e.name} background image`,title:e.name,className:"pointer-events-auto",style:{scale:e.iconScale}}),jsxRuntimeExports.jsx("div",{className:cn("absolute top-1/2 left-1/2 font-bold text-[1.8em] text-white pointer-events-none box-content",e.textColor),style:{transform:"translateX(-50%) translateY(-50%) translateZ(5px)"},children:e.value})]}),MoneyIcon=e=>jsxRuntimeExports.jsx("div",{className:cn("text-2xl font-bold border border-white px-1 bg-money text-white",e.className),style:e.style,children:jsxRuntimeExports.jsxs("div",{style:{transform:"translateZ(5px)"},children:[e.value,"M$"]})}),GameCard=props=>{const{handSize,isAnyCardAnimated,isGameOver,play,canTriggerEffect,haveEnoughResources}=useCardGame(state=>{const payWith=typeof props.card.effect.cost=="number"?"energy":"money",cost=Number(props.card.effect.cost);return{handSize:state.hand.length,isAnyCardAnimated:state.hand.some(e=>e.state!=="idle")||state.activities.length>0&&state.activities.some(e=>e.state!=="idle"),play:state.play,isGameOver:state.isGameOver,haveEnoughResources:payWith==="energy"?state.energy+state.reputation>=cost:state.money>=cost,canTriggerEffect:!props.card.effect.condition||eval(props.card.effect.condition)}}),positionFromCenter=props.position-(handSize-1)/2;return jsxRuntimeExports.jsx("div",{className:cn("game-card","relative w-[calc(630px/3)] h-[calc(880px/3)]","transition-transform hover:-translate-y-14","-mx-3.5 z-10 hover:z-20 cursor-pointer select-none",props.card.state,{grayscale:isGameOver,"cursor-not-allowed":isAnyCardAnimated}),onClick:async()=>{!isAnyCardAnimated&&!isGameOver&&await play(props.card)},onContextMenu:e=>{e.preventDefault(),isActionCardInfo(props.card)&&props.card.url&&window.open(props.card.url,"_blank")},style:{marginBottom:`${20-Math.abs(positionFromCenter)*5}px`,rotate:`${positionFromCenter*2}deg`,transitionDuration:"0.3s",transitionTimingFunction:"ease-in-out"},children:jsxRuntimeExports.jsxs(Tilt,{scale:1.1,className:cn("group/game-card transition-shadow duration-200 ease-in-out","hover:shadow-glow-20","flex flex-col w-full h-full rounded-md","rounded-md *:shrink-0",{"bg-card shadow-primary":props.card.effect.type==="support","shadow-action":props.card.effect.type==="action"}),children:[isActionCardInfo(props.card)&&props.card.detail&&jsxRuntimeExports.jsx("div",{className:cn("absolute pointer-events-none left-1/2 -top-[10px] -translate-x-1/2 -translate-y-full rounded-2xl bg-card","px-5 py-2 opacity-0 group-hover/game-card:animate-appear text-sm w-max max-w-full text-center shadow shadow-action"),children:props.card.detail}),jsxRuntimeExports.jsxs("div",{className:cn("flex justify-start items-center h-10 rounded-t-md",{"bg-action":props.card.effect.type==="action","bg-support":props.card.effect.type==="support"}),style:{transformStyle:"preserve-3d"},children:[jsxRuntimeExports.jsx("div",{className:cn("font-changa shrink-0 relative",{grayscale:!haveEnoughResources||!canTriggerEffect}),style:{transform:"translateZ(5px) translateX(-15px)",transformStyle:"preserve-3d"},children:typeof props.card.effect.cost=="number"?jsxRuntimeExports.jsx(ValueIcon,{name:"Coût en énergie / points d'action",image:"images/energy-background.png",value:props.card.effect.cost,iconScale:"0.75",style:{transform:"translateZ(5px)",transformStyle:"preserve-3d"}}):jsxRuntimeExports.jsx(MoneyIcon,{value:props.card.effect.cost,style:{transform:"translateZ(10px) rotate(-10deg)",transformStyle:"preserve-3d"}})}),jsxRuntimeExports.jsx("h2",{className:cn("whitespace-nowrap overflow-hidden text-ellipsis shrink-0 flex-grow",{"text-sm":props.card.name.length>20,"text-primary-foreground":props.card.effect.type==="action","opacity-50":!canTriggerEffect||!haveEnoughResources}),style:{transform:"translateZ(5px)"},children:props.card.name})]}),isActionCardInfo(props.card)?jsxRuntimeExports.jsx(GameCardProject,{card:props.card}):jsxRuntimeExports.jsx(GameCardTechno,{card:props.card}),jsxRuntimeExports.jsxs("div",{className:"bg-card flex-grow rounded-b-md",style:{transformStyle:"preserve-3d"},children:[jsxRuntimeExports.jsx("p",{className:cn("py-[10px] px-[15px] text-center",{"grayscale opacity-50":!canTriggerEffect}),style:{transform:"translateZ(10px)"},dangerouslySetInnerHTML:{__html:props.card.effect.description}}),props.card.ephemeral&&jsxRuntimeExports.jsx("div",{className:"text-center h-full text-2xl text-muted-foreground/20 font-bold",children:"Éphémère"})]}),jsxRuntimeExports.jsx(BorderLight,{groupName:"game-card",appearOnHover:!0,disappearOnCorners:!0}),jsxRuntimeExports.jsx(BorderLight,{groupName:"game-card",appearOnHover:!0,disappearOnCorners:!0,opposed:!0})]})})},GameCardProject=e=>jsxRuntimeExports.jsxs("div",{className:"group/image",style:{transformStyle:"preserve-3d"},children:[jsxRuntimeExports.jsx("div",{className:cn("inset-shadow","relative flex justify-center items-center"),style:{transformStyle:"preserve-3d"},children:jsxRuntimeExports.jsx("img",{src:e.card.image,alt:`Illustration du projet "${e.card.name}"`,className:"w-full aspect-video object-cover",style:{transform:"translateZ(-15px)"}})}),e.card.description&&jsxRuntimeExports.jsx("div",{className:cn("transition-opacity duration-1000 group-hover/image:opacity-0","absolute bottom-0 w-full h-1/3 bg-background/50","flex justify-center items-center"),style:{transform:"translateZ(-5px)"},children:jsxRuntimeExports.jsxs("p",{className:"text-sm text-center",children:['"',e.card.description,'"']})})]}),spinners=["React","Knex"],GameCardTechno=e=>jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx("div",{className:"flex justify-center items-center mt-4",style:{transform:"translateZ(20px)"},children:jsxRuntimeExports.jsx("img",{src:e.card.logo,alt:`Logo de la techno "${e.card.name}"`,className:cn("w-2/3 object-contain aspect-square",{"group-hover/game-card:animate-spin-forward":spinners.includes(e.card.name)})})})}),helpers=["Si vous n'avez plus de @reputation, vous perdez la partie.","Si vous ne pouvez plus jouer de carte, vous perdez la partie.","Si vous obtenez MONEY_TO_REACHM$, vous gagnez la partie.","Certaines cartes coutent de l'argent pour être jouées.","Votre pioche est limitée. Jouez prudemment !","Chaque carte @action jouée ajoute un jour à la partie.","Les cartes @action ont une bannière bleue.","Lorsque vous n'avez plus d'@energy, puisez dans la @reputation.","Les cartes éphémères sont détruites après utilisation.","Les effets des @activitys sont cumulables !"];function Svg$4(e){return React.createElement("div",{...e,className:cn("w-full h-full aspect-square text-foreground",e.className),style:e.style},React.createElement("svg",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",viewBox:"0 0 512 512",height:"100%",width:"100%",xmlns:"http://www.w3.org/2000/svg"},React.createElement("path",{d:"M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 448c-110.532 0-200-89.431-200-200 0-110.495 89.472-200 200-200 110.491 0 200 89.471 200 200 0 110.53-89.431 200-200 200zm107.244-255.2c0 67.052-72.421 68.084-72.421 92.863V300c0 6.627-5.373 12-12 12h-45.647c-6.627 0-12-5.373-12-12v-8.659c0-35.745 27.1-50.034 47.579-61.516 17.561-9.845 28.324-16.541 28.324-29.579 0-17.246-21.999-28.693-39.784-28.693-23.189 0-33.894 10.977-48.942 29.969-4.057 5.12-11.46 6.071-16.666 2.124l-27.824-21.098c-5.107-3.872-6.251-11.066-2.644-16.363C184.846 131.491 214.94 112 261.794 112c49.071 0 101.45 38.304 101.45 88.8zM298 368c0 23.159-18.841 42-42 42s-42-18.841-42-42 18.841-42 42-42 42 18.841 42 42z"})))}function Svg$3(e){return React.createElement("div",{...e,className:cn("w-full h-full aspect-square text-foreground",e.className),style:e.style},React.createElement("svg",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",viewBox:"0 0 512 512",height:"100%",width:"100%",xmlns:"http://www.w3.org/2000/svg"},React.createElement("path",{fill:"none",d:"M337.46 240 312 214.54l-56 56-56-56L174.54 240l56 56-56 56L200 377.46l56-56 56 56L337.46 352l-56-56 56-56z"}),React.createElement("path",{fill:"none",d:"M337.46 240 312 214.54l-56 56-56-56L174.54 240l56 56-56 56L200 377.46l56-56 56 56L337.46 352l-56-56 56-56z"}),React.createElement("path",{d:"m64 160 29.74 282.51A24 24 0 0 0 117.61 464h276.78a24 24 0 0 0 23.87-21.49L448 160zm248 217.46-56-56-56 56L174.54 352l56-56-56-56L200 214.54l56 56 56-56L337.46 240l-56 56 56 56z"}),React.createElement("rect",{width:"448",height:"80",x:"32",y:"48",rx:"12",ry:"12"})))}function Svg$2(e){return React.createElement("div",{...e,className:cn("w-full h-full aspect-square text-foreground",e.className),style:e.style},React.createElement("svg",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",viewBox:"0 0 16 16",height:"100%",width:"100%",xmlns:"http://www.w3.org/2000/svg"},React.createElement("path",{d:"m14.12 10.163 1.715.858c.22.11.22.424 0 .534L8.267 15.34a.6.6 0 0 1-.534 0L.165 11.555a.299.299 0 0 1 0-.534l1.716-.858 5.317 2.659c.505.252 1.1.252 1.604 0l5.317-2.66zM7.733.063a.6.6 0 0 1 .534 0l7.568 3.784a.3.3 0 0 1 0 .535L8.267 8.165a.6.6 0 0 1-.534 0L.165 4.382a.299.299 0 0 1 0-.535z"}),React.createElement("path",{d:"m14.12 6.576 1.715.858c.22.11.22.424 0 .534l-7.568 3.784a.6.6 0 0 1-.534 0L.165 7.968a.299.299 0 0 1 0-.534l1.716-.858 5.317 2.659c.505.252 1.1.252 1.604 0z"})))}function Svg$1(e){return React.createElement("div",{...e,className:cn("w-full h-full aspect-square text-foreground",e.className),style:e.style},React.createElement("svg",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",viewBox:"0 0 512 512",height:"100%",width:"100%",xmlns:"http://www.w3.org/2000/svg"},React.createElement("path",{d:"M225.814 32.316c-3.955-.014-7.922-.01-11.9.007-19.147.089-38.6.592-58.219 1.32l5.676 24.893c20.431-2.31 42.83-4.03 65.227-4.89 12.134-.466 24.194-.712 35.892-.65 35.095.183 66.937 3.13 87.77 11.202l8.908 3.454-3.977 8.685c-29.061 63.485-35.782 124.732-31.228 184.826 2.248-71.318 31.893-134.75 70.81-216.068-52.956-8.8-109.634-12.582-168.959-12.78zm28.034 38.79c-8.74.007-17.65.184-26.559.526-41.672 1.6-83.199 6.49-110.264 12.096 30.233 56.079 54.69 112.287 70.483 167.082a71.934 71.934 0 0 1 5.894.045c4.018.197 7.992.742 11.875 1.59-16.075-51.397-34.385-98.8-57.146-146.131l-5.143-10.694 11.686-2.068c29.356-5.198 59.656-7.21 88.494-7.219 1.922 0 3.84.007 5.748.024 18.324.16 35.984 1.108 52.346 2.535l11.054.965-3.224 10.617c-18.7 61.563-22.363 127.678-11.79 190.582.176.163.354.325.526.49 3.813-1.336 7.38-2.698 10.705-4.154-8.254-67.394-4.597-136.923 26.229-209.201-17.202-4.383-43.425-6.674-72.239-7.034a656.656 656.656 0 0 0-8.675-.05zm144.945 7.385c-30.956 65.556-52.943 118.09-56.547 174.803 20.038-66.802 58.769-126.685 102.904-165.158a602.328 602.328 0 0 0-46.357-9.645zM103.832 97.02c-18.76 3.868-37.086 8.778-54.812 15.562 8.626 7.48 24.22 21.395 43.14 39.889 8.708-8.963 17.589-17.818 26.852-25.87a1067.587 1067.587 0 0 0-15.18-29.581zm142.023 7.482c-13.62-.066-27.562.324-41.554 1.293-1.468 13.682-9.56 26.482-19.225 39.07 15.431 36.469 28.758 73.683 40.756 113.194 18.375 5.42 36.554 11.827 51.28 19.504-5.47-42.458-4.722-85.963 2.38-128.508-12.885-13.31-19.597-28.09-20.135-44.34a621.48 621.48 0 0 0-13.502-.213zm182.018 26.985c-24.73 29.3-46.521 65.997-61.37 105.912 27.264-38.782 60.79-69.032 96.477-90.4a1318.664 1318.664 0 0 0-35.107-15.512zm-300.74 11.959c-14.594 13.188-29.014 29.017-44.031 44.097 32.289 19.191 59.791 41.918 82.226 67.66 1.393-.526 2.8-.999 4.215-1.43-10.498-36.096-24.885-73.033-42.41-110.327zM360.52 268.198c-16.397 19.788-31.834 30.235-53.09 38.57 2.391 9.22-1.16 19.805-9.334 27.901-4.808 4.761-10.85 10.188-19.684 13.715a62.896 62.896 0 0 0 3.9 2.127c12.364 6.17 34.207 4.18 54.5-5.049 20.23-9.2 38.302-25.092 45-41.191 3.357-9.05.96-13.77-4.917-20.692-4.184-4.925-10.295-9.89-16.375-15.38zm-170.079.586c-10.715-.098-21.597 2.994-30.59 9.76-12.79 9.623-22.65 26.784-22.738 55.934v.2l-.01.2c-2.92 61.381 1.6 89.7 10.555 105.065 7.904 13.562 21.05 20.054 40.28 31.994.916-2.406 1.87-5.365 2.765-9.098 2.277-9.499 4.161-22.545 5.355-36.975 2.389-28.858 2.04-63.51-1.955-88.445l-2.111-13.19 13.016 2.995c31.615 7.273 49.7 8.132 60.2 6.28 10.502-1.854 14.061-5.523 20.221-11.624 5.79-5.732 5.682-7.795 4.456-11.021-1.227-3.227-6.149-8.545-14.5-13.633-16.703-10.176-45.085-19.611-71.614-26.647a53.988 53.988 0 0 0-13.33-1.795zm189.1 69.416c-10.013 9.754-22.335 17.761-35.277 23.647-20.983 9.542-44.063 13.907-63.211 7.553-6.76 2.516-10.687 5.407-12.668 7.8-2.718 3.284-2.888 5.7-1.967 9.16.92 3.46 3.665 7.568 7.059 10.524 3.393 2.956 7.426 4.492 8.959 4.564 46.794 2.222 67.046-11.207 92.277-26.783 7.358-4.542 10.174-13.743 9.469-22.931-.353-4.594-1.69-8.911-3.233-11.63a9.009 9.009 0 0 0-1.408-1.904zm-166.187 9.096c2.727 25.068 2.772 54.314.642 80.053-1.247 15.072-3.175 28.779-5.789 39.685-1.137 4.746-2.388 8.954-3.9 12.659l146.697-6.465c-1.656-6.149-3.344-12.324-5.031-18.502a127.004 127.004 0 0 1-17.24 4.424l.044.73-8.316.518c-5.121.614-10.452.953-15.983.992l-83.86 5.21 2.493-11.607c7.947-37.006 8.68-69.589 3.778-105.234a353.433 353.433 0 0 1-13.536-2.463zm31.972 4.684c3.948 31.933 3.473 62.41-2.406 95.2l19.264-1.196a39.44 39.44 0 0 1-6.1-14.778c-1.296-6.88-.575-14.538 3.926-20.87.199-.281.414-.55.627-.821-5.246-4.845-9.628-11.062-11.614-18.524-2.114-7.944-.794-17.67 5.497-25.27 2.079-2.51 4.592-4.776 7.543-6.816-2.61-2.08-4.898-4.285-6.874-6.582-3.064.021-6.345-.093-9.863-.343zm132.666 41.785c-23.456 14.253-49.81 27.876-96.41 25.664a26.402 26.402 0 0 1-4.518-.615c-1.233.553-1.891 1.256-2.382 1.947-.963 1.355-1.532 3.8-.909 7.113 1.248 6.627 7.525 13.889 13.37 14.569 41.385 4.813 69.979-8.726 87.341-24.477 8-7.258 8.068-11.9 6.89-16.951-.59-2.523-1.89-4.969-3.382-7.25zm-6.683 49.062a114.657 114.657 0 0 1-8.547 4.86c1.65 6.051 3.304 12.102 4.937 18.154l19.92-3.572c-5.14-4.387-9.162-8.954-12.39-13.496-1.442-2.029-2.713-4.001-3.92-5.946z"})))}function Svg(e){return React.createElement("div",{...e,className:cn("w-full h-full aspect-square text-foreground",e.className),style:e.style},React.createElement("svg",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",viewBox:"0 0 512 512",height:"100%",width:"100%",xmlns:"http://www.w3.org/2000/svg"},React.createElement("path",{d:"M32 456a24 24 0 0 0 24 24h400a24 24 0 0 0 24-24V176H32zm80-238.86a9.14 9.14 0 0 1 9.14-9.14h109.72a9.14 9.14 0 0 1 9.14 9.14v109.72a9.14 9.14 0 0 1-9.14 9.14H121.14a9.14 9.14 0 0 1-9.14-9.14zM456 64h-55.92V32h-48v32H159.92V32h-48v32H56a23.8 23.8 0 0 0-24 23.77V144h448V87.77A23.8 23.8 0 0 0 456 64z"})))}function createContextScope(e,t=[]){let n=[];function r(i,s){const o=reactExports.createContext(s),l=n.length;n=[...n,s];function m(p){const{scope:d,children:u,...g}=p,x=(d==null?void 0:d[e][l])||o,h=reactExports.useMemo(()=>g,Object.values(g));return jsxRuntimeExports.jsx(x.Provider,{value:h,children:u})}function f(p,d){const u=(d==null?void 0:d[e][l])||o,g=reactExports.useContext(u);if(g)return g;if(s!==void 0)return s;throw new Error(`\`${p}\` must be used within \`${i}\``)}return m.displayName=i+"Provider",[m,f]}const a=()=>{const i=n.map(s=>reactExports.createContext(s));return function(o){const l=(o==null?void 0:o[e])||i;return reactExports.useMemo(()=>({[`__scope${e}`]:{...o,[e]:l}}),[o,l])}};return a.scopeName=e,[r,composeContextScopes(a,...t)]}function composeContextScopes(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const s=r.reduce((o,{useScope:l,scopeName:m})=>{const p=l(i)[`__scope${m}`];return{...o,...p}},{});return reactExports.useMemo(()=>({[`__scope${t.scopeName}`]:s}),[s])}};return n.scopeName=t.scopeName,n}var NODES=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Primitive=NODES.reduce((e,t)=>{const n=reactExports.forwardRef((r,a)=>{const{asChild:i,...s}=r,o=i?Slot:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),jsxRuntimeExports.jsx(o,{...s,ref:a})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{}),PROGRESS_NAME="Progress",DEFAULT_MAX=100,[createProgressContext,createProgressScope]=createContextScope(PROGRESS_NAME),[ProgressProvider,useProgressContext]=createProgressContext(PROGRESS_NAME),Progress$1=reactExports.forwardRef((e,t)=>{const{__scopeProgress:n,value:r=null,max:a,getValueLabel:i=defaultGetValueLabel,...s}=e;(a||a===0)&&!isValidMaxNumber(a)&&console.error(getInvalidMaxError(`${a}`,"Progress"));const o=isValidMaxNumber(a)?a:DEFAULT_MAX;r!==null&&!isValidValueNumber(r,o)&&console.error(getInvalidValueError(`${r}`,"Progress"));const l=isValidValueNumber(r,o)?r:null,m=isNumber(l)?i(l,o):void 0;return jsxRuntimeExports.jsx(ProgressProvider,{scope:n,value:l,max:o,children:jsxRuntimeExports.jsx(Primitive.div,{"aria-valuemax":o,"aria-valuemin":0,"aria-valuenow":isNumber(l)?l:void 0,"aria-valuetext":m,role:"progressbar","data-state":getProgressState(l,o),"data-value":l??void 0,"data-max":o,...s,ref:t})})});Progress$1.displayName=PROGRESS_NAME;var INDICATOR_NAME="ProgressIndicator",ProgressIndicator=reactExports.forwardRef((e,t)=>{const{__scopeProgress:n,...r}=e,a=useProgressContext(INDICATOR_NAME,n);return jsxRuntimeExports.jsx(Primitive.div,{"data-state":getProgressState(a.value,a.max),"data-value":a.value??void 0,"data-max":a.max,...r,ref:t})});ProgressIndicator.displayName=INDICATOR_NAME;function defaultGetValueLabel(e,t){return`${Math.round(e/t*100)}%`}function getProgressState(e,t){return e==null?"indeterminate":e===t?"complete":"loading"}function isNumber(e){return typeof e=="number"}function isValidMaxNumber(e){return isNumber(e)&&!isNaN(e)&&e>0}function isValidValueNumber(e,t){return isNumber(e)&&!isNaN(e)&&e<=t&&e>=0}function getInvalidMaxError(e,t){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${DEFAULT_MAX}\`.`}function getInvalidValueError(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${DEFAULT_MAX} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var Root=Progress$1,Indicator=ProgressIndicator;const Progress=reactExports.forwardRef(({barColor:e,className:t,value:n,...r},a)=>jsxRuntimeExports.jsx(Root,{ref:a,className:cn("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...r,children:jsxRuntimeExports.jsx(Indicator,{className:cn("h-full w-full flex-1 transition-all",e,{"bg-primary":!e}),style:{transform:`translateX(-${100-(n||0)}%)`}})}));Progress.displayName=Root.displayName;const Gauge=e=>jsxRuntimeExports.jsxs("div",{className:"flex items-center h-7 w-[250px]",children:[jsxRuntimeExports.jsx(ValueIcon,{name:e.name,image:e.image,value:e.value,iconScale:e.iconScale,textColor:e.textColor,className:"absolute -translate-x-1/2 z-50 scale-50"}),jsxRuntimeExports.jsx(Progress,{barColor:e.barColor,className:e.className,value:e.value/e.max*100})]}),HUD=()=>{const e=useCardGame(),t=useNavigate(),[n,r]=React.useState(0),[a,i]=React.useState(!1);return jsxRuntimeExports.jsxs("div",{className:"w-[300px] ml-10 mt-4 space-y-2",children:[jsxRuntimeExports.jsx("code",{children:"CardGame v0.5-beta [WIP]"}),jsxRuntimeExports.jsx(Gauge,{name:"Energie / Points d'action",image:"images/energy-background.png",value:e.energy,max:MAX_ENERGY}),jsxRuntimeExports.jsx(Gauge,{name:"Réputation",image:"images/reputation-background.png",value:e.reputation,max:MAX_REPUTATION,barColor:"bg-pink-500"}),jsxRuntimeExports.jsxs("div",{className:"*:flex *:items-center *:gap-2 *:whitespace-nowrap space-y-2",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Svg$1,{className:"w-6"})," ",jsxRuntimeExports.jsx("span",{dangerouslySetInnerHTML:{__html:formatText(`Argent: ${e.money}M$ sur ${MONEY_TO_REACH}M$`)}})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Svg,{className:"w-6"})," Jour: ",e.day]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Svg$2,{className:"w-6"})," Deck: ",e.deck.length]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Svg$3,{className:"w-6"})," Défausse: ",e.discard.length]})]}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-3 p-2 gap-5 relative shrink-0 w-max",children:e.activities.map((s,o)=>jsxRuntimeExports.jsxs("div",{className:"group/activity shrink-0",children:[jsxRuntimeExports.jsx("img",{src:`images/activities/${s.image}`,alt:s.name,className:cn("block object-cover w-16 h-16 aspect-square rounded-full pointer-events-auto opacity-0 cursor-pointer mx-auto",{"opacity-100":s.state==="idle","animate-appear":s.state==="appear","opacity-100 animate-trigger":s.state==="triggered"})}),jsxRuntimeExports.jsxs("div",{className:"whitespace-nowrap text-sm text-center",children:[s.name," ",s.cumul===s.max?"MAX":s.cumul]}),jsxRuntimeExports.jsx("div",{className:"hidden group-hover/activity:block absolute right-0 top-1/2 -translate-y-1/2 translate-x-full",children:jsxRuntimeExports.jsx("p",{dangerouslySetInnerHTML:{__html:formatText(s.description.replace(/@cumul/g,String(s.cumul)).replace(/@s/g,s.cumul>1?"s":""))}})})]},o))}),e.isGameOver&&jsxRuntimeExports.jsxs("div",{className:"absolute top-0 left-0 w-screen h-screen flex flex-col items-center justify-center gap-4 bg-background/90 z-50 pointer-events-auto",children:[jsxRuntimeExports.jsxs("div",{className:"*:text-6xl *:whitespace-nowrap",children:[e.isWon&&jsxRuntimeExports.jsx("h1",{className:"text-green-500",children:"Vous avez gagné !"}),!e.isWon&&jsxRuntimeExports.jsx("h1",{className:"text-red-500",children:"Vous avez perdu !"})]}),e.reason&&jsxRuntimeExports.jsx("p",{className:"text-4xl",children:{reputation:"Vous avez utilisé toute votre jauge de réputation...",mill:"Vous n'avez plus de carte...","soft-lock":"Votre main est injouable..."}[e.reason]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-4",children:[jsxRuntimeExports.jsx(Button,{onClick:()=>t("/"),children:"Quitter"}),jsxRuntimeExports.jsx(Button,{onClick:()=>e.reset(),variant:"cta",size:"cta",children:"Recommencer"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2 items-center justify-start",children:[jsxRuntimeExports.jsx(Button,{onClick:()=>{e.reset()},variant:"default",size:"cta",children:"Recommencer"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 pointer-events-auto",onMouseEnter:()=>r((n+1)%helpers.length),children:[jsxRuntimeExports.jsx(Svg$4,{className:"h-6 cursor-pointer",onClick:()=>i(!a)}),a&&jsxRuntimeExports.jsx("span",{className:"whitespace-nowrap",dangerouslySetInnerHTML:{__html:formatText(helpers[n])}})]})]})]})},Game=e=>{const t=useCardGame(),n=useNavigate(),r=useGlobalState(i=>i.setCardGameVisibility),a=useMediaQuery("(width >= 768px) and (height >= 768px)");return r(!!e.show),React.useEffect(()=>{a||n("/")},[a,n]),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:cn("absolute w-full transition-[left] ease-in-out duration-500 pointer-events-none",e.show?"left-0":"-left-full"),children:jsxRuntimeExports.jsx(HUD,{})}),jsxRuntimeExports.jsx("div",{className:cn("absolute flex items-center -translate-x-1/2","left-[50vw] transition-[bottom] ease-in-out duration-1000",e.show?"bottom-[-50px]":"-bottom-full"),children:t.hand.sort((i,s)=>{const o=i.effect.type==="action"?1:0,l=s.effect.type==="action"?1:0,m=typeof i.effect.cost=="string"?1:0,f=typeof s.effect.cost=="string"?1:0,p=Number(i.effect.cost),d=Number(s.effect.cost);return o-l||m-f||p-d}).map((i,s)=>jsxRuntimeExports.jsx(GameCard,{card:i,position:s},s))})]})};export{Game};
