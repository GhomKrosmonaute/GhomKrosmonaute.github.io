import{R as u,c as p,a as de,r as x,d as ue,j as r,B as O,S as me,e as F,f as P,u as pe,g as ge}from"./index-Mb2DCGGB.js";import{b as g}from"./sound-CgBinXNZ.js";function fe(e){return u.createElement("div",{...e,className:p("w-full h-full aspect-square text-foreground",e.className),style:e.style},u.createElement("svg",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",viewBox:"0 0 512 512",height:"100%",width:"100%",xmlns:"http://www.w3.org/2000/svg"},u.createElement("path",{d:"M464 256h-80v-64c0-35.3 28.7-64 64-64h8c13.3 0 24-10.7 24-24V56c0-13.3-10.7-24-24-24h-8c-88.4 0-160 71.6-160 160v240c0 26.5 21.5 48 48 48h128c26.5 0 48-21.5 48-48V304c0-26.5-21.5-48-48-48zm-288 0H96v-64c0-35.3 28.7-64 64-64h8c13.3 0 24-10.7 24-24V56c0-13.3-10.7-24-24-24h-8C71.6 32 0 103.6 0 192v240c0 26.5 21.5 48 48 48h128c26.5 0 48-21.5 48-48V304c0-26.5-21.5-48-48-48z"})))}function he(e){return u.createElement("div",{...e,className:p("w-full h-full aspect-square text-foreground",e.className),style:e.style},u.createElement("svg",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",viewBox:"0 0 512 512",height:"100%",width:"100%",xmlns:"http://www.w3.org/2000/svg"},u.createElement("path",{d:"M464 32H336c-26.5 0-48 21.5-48 48v128c0 26.5 21.5 48 48 48h80v64c0 35.3-28.7 64-64 64h-8c-13.3 0-24 10.7-24 24v48c0 13.3 10.7 24 24 24h8c88.4 0 160-71.6 160-160V80c0-26.5-21.5-48-48-48zm-288 0H48C21.5 32 0 53.5 0 80v128c0 26.5 21.5 48 48 48h80v64c0 35.3-28.7 64-64 64h-8c-13.3 0-24 10.7-24 24v48c0 13.3 10.7 24 24 24h8c88.4 0 160-71.6 160-160V80c0-26.5-21.5-48-48-48z"})))}const I=[{name:"TypeScript",logo:"ts.png"},{name:"React",logo:"react.webp"},{name:"Tailwind CSS",logo:"tailwind.png"},{name:"NodeJS",logo:"node.png"},{name:"Vercel",logo:"vercel.png"},{name:"Next.js",logo:"nextjs.webp"},{name:"PostgreSQL",logo:"pgsql.png"},{name:"Docker",logo:"docker.webp"},{name:"PixiJS",logo:"pixi.png"},{name:"Three.js",logo:"three.png"},{name:"Gulp",logo:"gulp.webp"},{name:"Knex",logo:"knex.png"},{name:"Git",logo:"git.png"},{name:"Processing",logo:"processing.webp"},{name:"p5.js",logo:"p5.png"},{name:"Strapi",logo:"strapi.png"},{name:"Windows",logo:"windows.png"},{name:"MacOS",logo:"macos.png"},{name:"Linux",logo:"linux.png"},{name:"Jetbrains",logo:"jetbrains.webp"},{name:"Ruby",logo:"ruby.png"}],V=[{name:"Bot.ts",image:"bot.ts.png",description:"TypeScript framework for building Discord bots",detail:"Inclus un CLI pour g√©n√©rer des bots et des fichiers de bot. Actuellement mon projet le plus important.",url:"https://ghom.gitbook.io/bot.ts"},{name:"CRISPR-Crunch",image:"crispr-crunch.png",description:"Puzzle game about gene editing",detail:"Un jeu de puzzle sur l'√©dition de g√®nes r√©alis√© avec TypeScript, PixiJS et Booyah avec l'√©quipe PlayCurious.",url:"https://playcurious.games/our-games/crispr-crunch"},{name:"Portfolio",image:"portfolio.png",description:"My personal portfolio with a card game",detail:"Mon portfolio r√©alis√© avec TypeScript, React, Vite, Tailwind CSS, Zustand et beaucoup de passion"},{name:"Les Labs JS",image:"js-labs.png",description:"A Discord server for JavaScript developers I own and manage",detail:"Le meilleur endroit pour apprendre et partager sur l'√©cosyst√®me JavaScript",url:"https://discord.gg/3vC2XWK"},{name:"2D Shooter",image:"shooter.png",description:"My first game in TypeScript",detail:"Un simple jeu de tir 2D avec un vaisseau spatial et des ennemis r√©alis√© avec p5.js en TypeScript",url:"https://github.com/GhomKrosmonaute/TypedShooterGame"},{name:"Gario",image:"gario.png",description:"A 2D platformer game for showcase",detail:"Un simple jeu de plateforme 2D avec un syst√®me de checkpoint r√©alis√© avec p5.js en TypeScript",url:"https://github.com/GhomKrosmonaute/Gario"},{name:"Booyah",image:"booyah.png",description:"A TypeScript game engine",detail:"Un moteur de jeu puissant utilisant des machines √† √©tats r√©alis√© en TypeScript par Jesse Himmelstein et am√©lior√© par Ghom",url:"https://github.com/GhomKrosmonaute/Booyah"},{name:"Nano",image:"nano.png",description:"TypeScript library for building modular Discord bots",detail:"Vous pouvez utiliser cette lib pour construire des bots Discord avec une architecture modulaire et flexible",url:"https://github.com/NanoWorkspace"},{name:"Sea Rescue",image:"sea-rescue.png",description:"3D game about ocean cleaning",detail:"R√©alis√© avec TypeScript, Three.js et Booyah avec l'√©quipe PlayCurious.",url:"https://playcurious.games/our-games/sea-rescue/"},{name:"Site Photographe",image:"photo.png",description:"A website for a photographer",detail:"R√©lis√© avec Next.js, TypeScript, React et Tailwind CSS. Optimis√© pour le r√©f√©rencement et les performances. Inclus un CMS."},{name:"RedMetrics",image:"red-metrics.png",description:"Open source web metrics tool",detail:"R√©alis√© avec TypeScript, React, PostgreSQL et Express chez PlayCurious.",url:"https://github.com/play-curious/RedMetrics2/"},{name:"WakFight",image:"wak-fight.png",description:"RPG fighting Discord bot",detail:"Mon premier bot Discord RPG bas√© sur l'univers de Wakfu."},{name:"Boat Quest",image:"edenred.png",description:"2D game about ocean cleaning",detail:"R√©alis√© avec TypeScript, PixiJS et Booyah avec l'√©quipe PlayCurious pour EdenRed.",url:"https://playcurious.games/our-games/edenred-boat-quest/"},{name:"Survival RPG",image:"survival-rpg.png",description:"Hardcore RPG Discord bot",detail:"Un bot Discord RPG hardcore en rogue-like.",url:"https://discord.gg/7N5pJEY"}],Q=[{description:"Gagne 10M$",onPlayed:async e=>await e.addMoney(10),type:"action",cost:2},{description:"Gagne 20M$",onPlayed:async e=>await e.addMoney(20),type:"action",cost:4},{description:"Le matin, gagne 10M$. L'apr√®s-midi, gagne 2 @energys",onPlayed:async e=>{new Date().getHours()<12?await e.addMoney(10):await e.addEnergy(2)},type:"action",cost:0},{description:"Gagne 10M$ fois le nombre de cartes @action en main en comptant celle-ci",onPlayed:async e=>{await e.addMoney(10*e.hand.filter(t=>t.effect.type==="action").length)},type:"action",cost:4},{description:"Si le dark mode est activ√©, gagne 20M$",onPlayed:async e=>await e.addMoney(20),condition:()=>localStorage.getItem("theme")==="dark",type:"action",cost:3},{description:"Si la @reputation est inf√©rieur √† 5, gagne 20M$",onPlayed:async e=>await e.addMoney(20),condition:e=>e.reputation<5,type:"action",cost:3},{description:"Joue gratuitement la carte la plus √† droite de ta main",onPlayed:async e=>await e.play(e.hand[e.hand.length-1],{free:!0}),condition:(e,t)=>{const a=e.hand[e.hand.length-1];return a&&a.name!==t.name&&(!a.effect.condition||a.effect.condition(e,e.hand[e.hand.length-1]))},type:"action",cost:4,waitBeforePlay:!0},{description:"Pioche une carte",onPlayed:async e=>await e.draw(),condition:e=>e.deck.length>=1,type:"support",cost:1,waitBeforePlay:!0},{description:"Pioche 2 cartes",onPlayed:async e=>await e.draw(2),condition:e=>e.deck.length>=2,type:"support",cost:2,waitBeforePlay:!0},{description:"Si tu as moins de 4 cartes en main, pioche 2 cartes",onPlayed:async e=>await e.draw(2),condition:e=>e.hand.length<4&&e.deck.length>=2,type:"support",cost:1,waitBeforePlay:!0},{description:"Pioche une carte @action",onPlayed:async e=>await e.draw(1,{filter:t=>t.effect.type==="action"}),condition:e=>e.deck.some(t=>t.effect.type==="action"),type:"support",cost:2,waitBeforePlay:!0},{description:"Si tu n'as pas de carte @action en main, pioche une carte @action",onPlayed:async e=>await e.draw(1,{filter:t=>t.effect.type==="action"}),condition:e=>e.hand.every(t=>t.effect.type!=="action")&&e.deck.some(t=>t.effect.type==="action"),type:"support",cost:1,waitBeforePlay:!0},{description:"D√©fausse une carte al√©atoire, pioche une carte et gagne 10M$",onPlayed:async e=>{await e.drop(),await e.draw(),await e.addMoney(10)},condition:e=>e.hand.length>=2,type:"support",cost:0,waitBeforePlay:!0},{description:"Renvoie une carte al√©atoire dans la pioche, pioche une carte",onPlayed:async e=>{await e.drop({toDeck:!0}),await e.draw()},condition:e=>e.hand.length>=2,type:"support",cost:0,waitBeforePlay:!0},{description:"D√©fausse les cartes en main, pioche 5 cartes",onPlayed:async e=>{await e.dropAll(),await e.draw(5)},type:"support",cost:0,waitBeforePlay:!0},{description:"Renvoie toutes les cartes en main dans la pioche, pioche 5 cartes",onPlayed:async e=>{await e.dropAll({toDeck:!0}),await e.draw(5)},type:"support",cost:3,waitBeforePlay:!0},{description:"Pioche autant de carte que d'@upgrades d√©couvertes",onPlayed:async e=>{await e.draw(e.upgrades.length)},condition:e=>e.upgrades.length>0,type:"support",cost:3,waitBeforePlay:!0},{description:"D√©fausse les cartes @support en main(min 1), pioche 2 cartes @action",onPlayed:async e=>{await e.dropAll({filter:t=>t.effect.type==="support"}),await e.draw(2,{filter:t=>t.effect.type==="action"})},condition:e=>e.hand.filter(t=>t.effect.type==="support").length>1,type:"support",cost:3,waitBeforePlay:!0},{description:"D√©fausse les cartes @action en main(min 1), pioche 3 cartes",onPlayed:async e=>{await e.dropAll({filter:t=>t.effect.type==="action"}),await e.draw(3)},condition:e=>e.hand.some(t=>t.effect.type==="action"),type:"support",cost:1,waitBeforePlay:!0},{description:"Pioche 2 cartes qui co√ªtent de l'@energy",onPlayed:async e=>{await e.draw(2,{filter:t=>typeof t.effect.cost=="number"})},condition:e=>e.deck.some(t=>typeof t.effect.cost=="number"),type:"support",cost:3,waitBeforePlay:!0},{description:"Divise le prix de la prochaine carte jou√©e par 2",onPlayed:async e=>await e.addNextCardModifier(t=>({...t,effect:{...t.effect,cost:typeof t.effect.cost=="number"?Math.ceil(t.effect.cost/2):String(Math.ceil(Number(t.effect.cost)/2))}})),type:"support",cost:3},{description:"Double l'@energy",onPlayed:async e=>await e.addEnergy(e.energy),type:"action",cost:"10"},{description:"Ajoute 4 @energys",onPlayed:async e=>await e.addEnergy(3),type:"action",cost:"10"},{description:"Si la @reputation est inf√©rieur √† 5, ajoute 5 @energys",onPlayed:async e=>await e.addEnergy(5),condition:e=>e.reputation<5,type:"action",cost:"5"},{description:"Remplis la jauge de @reputation",onPlayed:async e=>await e.addReputation(10),type:"action",cost:"100",ephemeral:!0}],ee=[{name:"Starbucks",description:"Rend @cumul @energy@s par jour",image:"starbucks.png",onTrigger:async(e,t)=>{await e.addEnergy(t.cumul)},cumulable:!0,max:3,cost:"100"},{name:"M√©ditation",description:"Pioche @cumul carte@s par jour",image:"meditation.png",onTrigger:async(e,t)=>{await e.draw(t.cumul)},cumulable:!0,max:3,cost:"100"},{name:"Bourse",description:"Gagne @cumul0% de votre capital par jour",image:"bourse.png",onTrigger:async(e,t)=>{await e.addMoney(Math.ceil(t.cumul/100*e.money))},cumulable:!0,cost:"150"},{name:"Recyclage",description:"Place @cumul carte@s al√©atoire@s de la d√©fausse dans le deck par jour",image:"recyclage.png",onTrigger:async(e,t)=>{await e.recycle(t.cumul)},cumulable:!0,max:3,cost:"50"},{name:"I.A",description:"Gagne @cumulM$ fois le nombre de carte en d√©fausse par jour",image:"ia.png",onTrigger:async(e,t)=>{await e.addMoney(t.cumul*e.discard.length)},cumulable:!0,cost:"50"},{name:"Sport",description:"Gagne @cumul @reputation@s par jour",image:"sport.png",onTrigger:async(e,t)=>{await e.addReputation(t.cumul,{skipGameOverCheck:!0})},cumulable:!0,max:2,cost:12},{name:"PC Puissant",description:"Gagne @cumulM$ fois le nombre d'@energy par jour",image:"pc-puissant.png",onTrigger:async(e,t)=>{await e.addMoney(t.cumul*e.energy)},cumulable:!0,max:2,cost:12},{name:"Stagiaire",description:"Gagne @cumulM$ fois le nombre de cartes en main par jour",image:"stagiaire.png",onTrigger:async(e,t)=>{await e.addMoney(t.cumul*e.hand.length)},cumulable:!0,max:5,cost:"100"}],z=20,te=8,$=10,L=500,ye={string:["20","50","75"],number:[5,7,10]};function xe(e,t){const a=e.upgrades.length,i=ye[typeof t.effect.cost][a]??1/0;return Math.min(Number(i),Number(t.effect.cost))}function ve(e){return JSON.parse(JSON.stringify(e,(t,a)=>typeof a=="function"?void 0:a))}function we(e,t){const a=ve(t),i=e.nextCardModifiers.slice();return t.effect.upgrade&&i.unshift(s=>s.effect.upgrade?{...s,effect:{...s.effect,cost:xe(e,s)}}:s),i.reduce((s,n)=>n(s),a)}function E(e,t){const a=typeof t.effect.cost=="number"?"energy":"money",i=we(e,t),s=Number(i.effect.cost),n=a==="money"?e[a]>=s:e[a]+e.reputation>=s;return{needs:a,cost:s,canBeBuy:n}}function j(e){return e.replace(/(\(.+?\))/g,`<span style="position: relative; transform-style: preserve-3d">
        <span style="
          display: inline-block; 
          position: absolute; 
          font-size: 12px; 
          white-space: nowrap;
          transform: rotate(5deg) translateX(-50%) translateY(-30%) translateZ(10px);">$1</span>
      </span>`).replace(/MONEY_TO_REACH/g,String(L)).replace(/MAX_HAND_SIZE/g,String(te)).replace(/@action([^\s.:,]*)/g,'<span style="color: #2563eb; transform: translateZ(5px);">Action$1</span>').replace(/@reputation([^\s.:,]*)/g,'<span style="color: #d946ef; transform: translateZ(5px);">R√©putation$1</span>').replace(/@upgrade([^\s.:,]*)/g,'<span style="color: #f59e0b; transform: translateZ(5px);">Am√©lioration$1</span>').replace(/@support([^\s.:,]*)/g,'<span style="display: inline-block; background-color: hsla(var(--secondary) / 0.5); color: hsl(var(--secondary-foreground)); padding: 0 6px; border-radius: 4px; transform: translateZ(5px);">Support$1</span>').replace(/@energy([^\s.:,]*)/g,'<span style="color: hsl(var(--primary)); transform: translateZ(5px);">√ânergie$1</span>').replace(/((?:\d+|<span[^>]*>\d+<\/span>)M\$)/g,'<span style="display: inline-block; background-color: #022c22; color: white; padding: 0 4px; transform: translateZ(5px);">$1</span>')}function ae(e,t){return e.replace(/@cumul/g,`<span style="color: #f59e0b">${t}</span>`).replace(/@s/g,t>1?"s":"")}async function v(e=500){return new Promise(t=>setTimeout(t,e))}function b(e,t=1){for(let a=0;a<t;a++)e.sort(()=>Math.random()-.5);return e}function H(e,t,a,i,s,n=!1){const o=(e-t)/(a-t)*(s-i)+i;return n?i<s?Math.max(Math.min(o,s),i):Math.max(Math.min(o,i),s):o}function k(e){return e.image!==void 0}const q=Q.filter(e=>e.type==="support"),Z=Q.filter(e=>e.type==="action");function U(){const e=I.map((s,n)=>{const o=H(n,0,I.length,0,q.length,!0),c=q[Math.floor(o)];return{...s,logo:`images/techno/${s.logo}`,state:"idle",effect:{...c,description:j(c.description)}}}),t=V.map((s,n)=>{const o=H(n,0,V.length,0,Z.length,!0),c=Z[Math.floor(o)];return{...s,image:`images/projects/${s.image}`,state:"idle",effect:{...c,description:j(c.description)}}}),a=ee.map(s=>({name:s.name,image:`images/upgrades/${s.image}`,state:"idle",effect:{upgrade:!0,ephemeral:!s.cumulable,description:j(`@upgrade <br/> ${ae(s.description,1)}`),onPlayed:async n=>await n.upgrade(s.name),type:"action",cost:s.cost}})),i=b([...e,...t,...a],3);return{score:0,reason:null,isWon:!1,isGameOver:!1,deck:i.slice(7),hand:i.slice(0,7),discard:[],upgrades:[],nextCardModifiers:[],day:1,energy:z,reputation:$,money:0}}const S=de((e,t)=>({...U(),updateScore:()=>{e(a=>({score:Math.max(0,a.reputation*100+a.money*100+a.upgrades.reduce((i,s)=>i+s.cumul,0)*100+a.energy*50-a.day*75)}))},addEnergy:async a=>{g.gain.play(),e(i=>({energy:Math.max(0,Math.min(z,i.energy+a))}))},addReputation:async(a,i)=>{if(a===10?g.powerUp.play():a>0?g.gain.play():g.loss.play(),e(n=>({reputation:Math.max(0,Math.min($,n.reputation+a))})),await v(),i!=null&&i.skipGameOverCheck)return;const s=t();s.isGameOver||s.reputation===0&&(g.defeat.play(),g.music.fade(.7,0,1e3),e({isGameOver:!0,isWon:!1,reason:"reputation"}))},addMoney:async a=>{a>0&&g.cashing.play(),e(s=>({money:s.money+a})),await v(),t().money>=L&&(g.victory.play(),e({isGameOver:!0,isWon:!0}))},addDay:async(a=1)=>{if(e(i=>({day:i.day+a})),a>0){const i=t();for(let s=0;s<a;s++)await Promise.all(i.upgrades.slice().map(async(n,o)=>{await v(250*o),await i.triggerUpgrade(n.name)}))}},upgrade:async a=>{const i=ee.find(n=>n.name===a);g.upgrade.play();let s=t();if(s.upgrades.find(n=>n.name===a)?e(n=>({upgrades:n.upgrades.map(o=>o.name===a?{...o,cumul:o.cumul+1}:o)})):e(n=>({upgrades:[...n.upgrades,{...i,state:"appear",cumul:1,max:i.cumulable?i.max??1/0:1}]})),i.cumulable&&i.max){s=t();const n=s.upgrades.find(o=>o.name===a);if(n.cumul===n.max){const o=s.hand.find(c=>c.effect.upgrade&&c.name===a);e({hand:s.hand.map(c=>c.name===o.name?{...c,state:"played"}:c)}),await v(),e({hand:s.hand.filter(c=>c.name!==o.name)})}}await v(),e(n=>({upgrades:n.upgrades.map(o=>o.name===a?{...o,state:"idle"}:o)}))},triggerUpgrade:async a=>{const i=t(),s=i.upgrades.find(n=>n.name===a);e(n=>({upgrades:n.upgrades.map(o=>o.name===s.name?{...o,state:"triggered"}:o)})),await v(),await s.onTrigger(i,s),await v(),e(n=>({upgrades:n.upgrades.map(o=>o.name===s.name?{...o,state:"idle"}:o)}))},addNextCardModifier:async(a,i)=>{g.powerUp.play(),e(s=>({nextCardModifiers:i!=null&&i.before?[a,...s.nextCardModifiers]:[...s.nextCardModifiers,a]}))},draw:async(a=1,i)=>{e(s=>{const n=i!=null&&i.fromDiscardPile?"discard":"deck",o=s.hand.slice(),c=s.discard.slice(),l=s[n].slice().filter(m=>i!=null&&i.filter?i.filter(m):!0),h=[];let y=!1,d=!1;for(let m=0;m<a&&l.length!==0;m++){const f=l.pop();f.state="drawn",h.push(f.name),o.length-1>=te?(c.push(f),d=!0):(o.push(f),y=!0)}return y?g.draw.play():d&&g.draw.play(),{hand:o,discard:c,[n]:b(s[n].filter(m=>!h.includes(m.name)),2)}}),await v(),e(s=>({hand:s.hand.map(n=>({...n,state:"idle"}))}))},drop:async a=>{const i=a!=null&&a.toDeck?"deck":"discard";g.drop.play();const s=t(),n=s.hand.slice().filter(l=>l.state==="idle"),o=Math.floor(Math.random()*n.length),c=n[o];e({hand:s.hand.map(l=>l.name===c.name?{...l,state:"dropped"}:l)}),await v(),e(l=>({hand:l.hand.filter(h=>h.name!==c.name),[i]:b([{...c,state:null},...l[i]],2)}))},dropAll:async a=>{const i=a!=null&&a.toDeck?"deck":"discard";g.drop.play();const s=t();e({hand:s.hand.map(n=>n.state==="idle"&&(!(a!=null&&a.filter)||a.filter(n))?{...n,state:"dropped"}:n)}),await v(),e(n=>({[i]:b([...n.hand.filter(o=>!(a!=null&&a.filter)||a.filter(o)).map(o=>({...o,state:null})),...n[i]],2),hand:n.hand.filter(o=>(a==null?void 0:a.filter)&&!a.filter(o))}))},recycle:async(a=1)=>{g.recycle.play();const i=t(),s=i.discard.slice(),n=i.deck.slice(),o=[];for(let c=0;c<a&&s.length!==0;c++){const l=s.pop();o.push(l.name),n.push(l)}e({deck:b(n),discard:i.discard.filter(c=>!o.includes(c.name))})},play:async(a,i)=>{const s=!!(i!=null&&i.free);let n=t();const o=async()=>{g.unauthorized.play(),e({hand:n.hand.map(d=>d.name===a.name?{...d,state:"unauthorized"}:d)}),await v(),e({hand:n.hand.map(d=>d.name===a.name?{...d,state:"idle"}:d)})};if(a.effect.condition&&!a.effect.condition(n,a)){await o();return}if(!s){const{needs:d,cost:m}=E(n,a);if(n[d]<m)if(d==="energy"){if(n.reputation+n.energy<m){await o();return}const f=m-n.energy;e({energy:0}),await n.addReputation(-f,{skipGameOverCheck:!0})}else{await o();return}else e({[d]:n[d]-m})}g.play.play();const c=async()=>{e(d=>({nextCardModifiers:[],hand:d.hand.map(m=>m.name===a.name?{...m,state:"played"}:m)})),await v(),e(d=>({discard:a.effect.ephemeral?d.discard:b([{...a,state:null},...d.discard],3),hand:d.hand.filter(m=>m.name!==a.name)})),a.effect.type==="action"&&await n.addDay()},l=async()=>{a.effect.waitBeforePlay&&await v(),await a.effect.onPlayed(n,a),n.updateScore()};if(await Promise.all([c(),l()]),n=t(),n.isGameOver)return;if(n.reputation===0){g.defeat.play(),g.music.fade(.7,0,1e3),e({isGameOver:!0,isWon:!1,reason:"reputation"}),n.updateScore();return}n.hand.length===0&&await n.draw(),n=t();const h=n.deck.length===0&&n.hand.length===0,y=n.hand.every(d=>d.effect.condition&&!d.effect.condition(n,d)?!0:!E(n,d).canBeBuy);(h||y)&&(g.defeat.play(),g.music.fade(.7,0,1e3),e({isGameOver:!0,isWon:!1,reason:h?"mill":"soft-lock"})),n.updateScore()},reset:()=>{e(U()),g.music.stop(),g.music.play()}})),X={transformStyle:"preserve-3d"},be=({max:e=20,reverse:t=!1,scale:a=1,perspective:i=1e3,className:s="",children:n,style:o})=>{const c=x.useRef(null),l=ue(c),[h,y]=x.useState({}),d=x.useCallback(f=>{if(c.current){const w=c.current.getBoundingClientRect(),M=f.clientX-w.left,C=f.clientY-w.top,B=w.width/2,A=w.height/2,D=(C-A)/A*e,_=(M-B)/B*e;y({...X,transform:`
            perspective(${i}px)
            rotateX(${t?D:-D}deg)
            rotateY(${t?-_:_}deg)
            scale(${a})
          `})}},[e,i,t,a]),m=x.useCallback(()=>{y({...X,transition:"transform 0.5s ease-in-out",transform:"scale(1)"})},[]);return x.useEffect(()=>{const f=c.current;return l?f&&(f.addEventListener("mousemove",d),f.addEventListener("mouseleave",m)):m(),()=>{f&&(f.removeEventListener("mousemove",d),f.removeEventListener("mouseleave",m)),m()}},[e,t,a,i,l]),r.jsx("div",{ref:c,className:p("will-change-transform",s),style:{...h,...o},children:n})},re=e=>{const t=S(a=>a.energy);return r.jsxs("div",{className:p("relative",e.className),style:e.style,children:[e.type==="energy"?!e.isCost||t>=e.value?r.jsx("img",{src:"images/energy-background.png",alt:"Energie background image",title:e.isCost?"Co√ªt en √©nergie":"Energie",className:"pointer-events-auto",style:{scale:e.iconScale}}):t>0?r.jsx("img",{src:"images/enerputation-background.png",alt:"Energie background image",title:e.isCost?"Co√ªt en √©nergie":"Energie",className:"pointer-events-auto",style:{scale:e.iconScale}}):r.jsx("img",{src:"images/reputation-background.png",alt:"Reputation background image",title:"Co√ªt en r√©putation",className:"pointer-events-auto",style:{scale:e.iconScale}}):r.jsx("img",{src:"images/reputation-background.png",alt:"Reputation background image",title:"R√©putation",className:"pointer-events-auto",style:{scale:e.iconScale}}),r.jsx("div",{className:p("absolute top-1/2 left-1/2 font-bold text-[1.8em] text-white pointer-events-none box-content",e.textColor),style:{transform:"translateX(-50%) translateY(-50%) translateZ(5px)"},children:e.value})]})},je=e=>r.jsx("div",{className:p("text-2xl font-bold border border-white px-1 bg-money text-white",e.className),style:e.style,children:r.jsxs("div",{style:{transform:"translateZ(5px)"},children:[e.value,"M$"]})}),Ne=e=>{const{handSize:t,isAnyCardAnimated:a,isGameOver:i,play:s,canTriggerEffect:n,parsedCost:o}=S(l=>{const h=E(l,e.card);return{handSize:l.hand.length,isAnyCardAnimated:l.hand.some(y=>y.state!=="idle")||l.upgrades.length>0&&l.upgrades.some(y=>y.state!=="idle"),play:l.play,isGameOver:l.isGameOver,parsedCost:h,canTriggerEffect:!e.card.effect.condition||e.card.effect.condition(l,e.card)}}),c=e.position-(t-1)/2;return r.jsx("div",{className:p("game-card","relative w-[calc(630px/3)] h-[calc(880px/3)]","transition-transform hover:-translate-y-14","-mx-3.5 z-10 hover:z-20 cursor-pointer select-none",e.card.state,{grayscale:i||!o.canBeBuy||!n,"cursor-not-allowed":a}),onClick:async()=>{!a&&!i&&await s(e.card)},onContextMenu:l=>{l.preventDefault(),k(e.card)&&e.card.url&&window.open(e.card.url,"_blank")},style:{marginBottom:`${20-Math.abs(c)*5}px`,rotate:`${c*2}deg`,transitionDuration:"0.3s",transitionTimingFunction:"ease-in-out"},children:r.jsxs(be,{scale:1.1,className:p("group/game-card transition-shadow duration-200 ease-in-out","hover:shadow-glow-20","flex flex-col w-full h-full rounded-md","rounded-md *:shrink-0",{"bg-card shadow-primary":e.card.effect.type==="support","shadow-action":e.card.effect.type==="action"}),children:[k(e.card)&&e.card.detail&&r.jsxs("div",{className:p("absolute pointer-events-none left-1/2 -top-[10px] -translate-x-1/2 -translate-y-full rounded-2xl bg-card","p-2 w-max max-w-full shadow shadow-action","transition-opacity duration-200 ease-in-out delay-1000 opacity-0 group-hover/game-card:opacity-100","flex gap-1"),children:[r.jsx(fe,{className:"w-10"}),r.jsx("div",{className:"flex-grow text-sm text-left",children:e.card.detail}),r.jsx(he,{className:"w-10 self-end"})]}),r.jsxs("div",{className:p("flex justify-start items-center h-10 rounded-t-md",{"bg-action":e.card.effect.type==="action","bg-support":e.card.effect.type==="support"}),style:{transformStyle:"preserve-3d"},children:[r.jsx("div",{className:"font-changa shrink-0 relative",style:{transform:"translateZ(5px) translateX(-15px)",transformStyle:"preserve-3d"},children:o.needs==="energy"?r.jsx(re,{isCost:!0,type:"energy",value:o.cost,iconScale:"0.75",style:{transform:"translateZ(5px)",transformStyle:"preserve-3d"}}):r.jsx(je,{value:String(o.cost),style:{transform:"translateZ(10px) rotate(-10deg)",transformStyle:"preserve-3d"}})}),r.jsx("h2",{className:p("whitespace-nowrap overflow-hidden text-ellipsis shrink-0 flex-grow",{"text-sm":e.card.name.length>20,"text-primary-foreground":e.card.effect.type==="action"}),style:{transform:"translateZ(5px)"},children:e.card.name})]}),k(e.card)?r.jsx(Se,{card:e.card}):r.jsx(Ce,{card:e.card}),r.jsxs("div",{className:"bg-card flex-grow rounded-b-md",style:{transformStyle:"preserve-3d"},children:[r.jsx("p",{className:"py-[10px] px-[15px] text-center",style:{transform:"translateZ(10px)",transformStyle:"preserve-3d"},dangerouslySetInnerHTML:{__html:e.card.effect.description}}),e.card.effect.ephemeral&&r.jsx("div",{className:"text-center h-full text-2xl text-muted-foreground/30 font-bold",children:"√âph√©m√®re"})]}),r.jsx(O,{groupName:"game-card",appearOnHover:!0,disappearOnCorners:!0}),r.jsx(O,{groupName:"game-card",appearOnHover:!0,disappearOnCorners:!0,opposed:!0})]})})},Se=e=>r.jsxs("div",{className:"group/image",style:{transformStyle:"preserve-3d"},children:[r.jsx("div",{className:p("inset-shadow","relative flex justify-center items-center"),style:{transformStyle:"preserve-3d"},children:r.jsx("img",{src:e.card.image,alt:`Illustration du projet "${e.card.name}"`,className:"w-full aspect-video object-cover",style:{transform:"translateZ(-15px)"}})}),e.card.description&&r.jsx("div",{className:p("transition-opacity duration-1000 group-hover/image:opacity-0","absolute bottom-0 w-full h-1/3 bg-background/50","flex justify-center items-center"),style:{transform:"translateZ(-5px)"},children:r.jsxs("p",{className:"text-sm text-center",children:['"',e.card.description,'"']})})]}),Me=["React","Knex"],Ce=e=>r.jsx(r.Fragment,{children:r.jsx("div",{className:"flex justify-center items-center mt-4",style:{transform:"translateZ(20px)"},children:r.jsx("img",{src:e.card.logo,alt:`Logo de la techno "${e.card.name}"`,className:p("w-2/3 object-contain aspect-square",{"group-hover/game-card:animate-spin-forward":Me.includes(e.card.name)})})})}),J=["Si vous n'avez plus de @reputation, vous perdez la partie.","Si vous ne pouvez plus jouer de carte, vous perdez la partie.","Si vous obtenez MONEY_TO_REACHM$, vous gagnez la partie.","Certaines cartes coutent de l'argent pour √™tre jou√©es.","Votre pioche est limit√©e. Jouez prudemment !","Chaque carte @action jou√©e ajoute un jour √† la partie.","Les cartes @action ont une banni√®re bleue.","Lorsque vous n'avez plus d'@energy, puisez dans la @reputation.","Les cartes √©ph√©m√®res sont d√©truites apr√®s utilisation.","Les effets des @upgrades sont cumulables !","Vous ne pouvez pas avoir plus de MAX_HAND_SIZE cartes en main.","Les cartes pioch√©es en trop sont d√©fauss√©es √† la place.","Le prix des cartes d'@upgrade augmente progressivement."];function Pe(e){return u.createElement("div",{...e,className:p("w-full h-full aspect-square text-foreground",e.className),style:e.style},u.createElement("svg",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",viewBox:"0 0 512 512",height:"100%",width:"100%",xmlns:"http://www.w3.org/2000/svg"},u.createElement("path",{d:"M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 448c-110.532 0-200-89.431-200-200 0-110.495 89.472-200 200-200 110.491 0 200 89.471 200 200 0 110.53-89.431 200-200 200zm107.244-255.2c0 67.052-72.421 68.084-72.421 92.863V300c0 6.627-5.373 12-12 12h-45.647c-6.627 0-12-5.373-12-12v-8.659c0-35.745 27.1-50.034 47.579-61.516 17.561-9.845 28.324-16.541 28.324-29.579 0-17.246-21.999-28.693-39.784-28.693-23.189 0-33.894 10.977-48.942 29.969-4.057 5.12-11.46 6.071-16.666 2.124l-27.824-21.098c-5.107-3.872-6.251-11.066-2.644-16.363C184.846 131.491 214.94 112 261.794 112c49.071 0 101.45 38.304 101.45 88.8zM298 368c0 23.159-18.841 42-42 42s-42-18.841-42-42 18.841-42 42-42 42 18.841 42 42z"})))}function ke(e){return u.createElement("div",{...e,className:p("w-full h-full aspect-square text-foreground",e.className),style:e.style},u.createElement("svg",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",viewBox:"0 0 512 512",height:"100%",width:"100%",xmlns:"http://www.w3.org/2000/svg"},u.createElement("path",{fill:"none",d:"M337.46 240 312 214.54l-56 56-56-56L174.54 240l56 56-56 56L200 377.46l56-56 56 56L337.46 352l-56-56 56-56z"}),u.createElement("path",{fill:"none",d:"M337.46 240 312 214.54l-56 56-56-56L174.54 240l56 56-56 56L200 377.46l56-56 56 56L337.46 352l-56-56 56-56z"}),u.createElement("path",{d:"m64 160 29.74 282.51A24 24 0 0 0 117.61 464h276.78a24 24 0 0 0 23.87-21.49L448 160zm248 217.46-56-56-56 56L174.54 352l56-56-56-56L200 214.54l56 56 56-56L337.46 240l-56 56 56 56z"}),u.createElement("rect",{width:"448",height:"80",x:"32",y:"48",rx:"12",ry:"12"})))}function Ee(e){return u.createElement("div",{...e,className:p("w-full h-full aspect-square text-foreground",e.className),style:e.style},u.createElement("svg",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",viewBox:"0 0 24 24",height:"100%",width:"100%",xmlns:"http://www.w3.org/2000/svg"},u.createElement("path",{fill:"none",d:"M0 0h24v24H0z"}),u.createElement("path",{d:"M14.06 9.94 12 9l2.06-.94L15 6l.94 2.06L18 9l-2.06.94L15 12l-.94-2.06zM4 14l.94-2.06L7 11l-2.06-.94L4 8l-.94 2.06L1 11l2.06.94L4 14zm4.5-5 1.09-2.41L12 5.5 9.59 4.41 8.5 2 7.41 4.41 5 5.5l2.41 1.09L8.5 9zm-4 11.5 6-6.01 4 4L23 8.93l-1.41-1.41-7.09 7.97-4-4L3 19l1.5 1.5z"})))}function ze(e){return u.createElement("div",{...e,className:p("w-full h-full aspect-square text-foreground",e.className),style:e.style},u.createElement("svg",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",viewBox:"0 0 512 512",height:"100%",width:"100%",xmlns:"http://www.w3.org/2000/svg"},u.createElement("path",{d:"M225.814 32.316c-3.955-.014-7.922-.01-11.9.007-19.147.089-38.6.592-58.219 1.32l5.676 24.893c20.431-2.31 42.83-4.03 65.227-4.89 12.134-.466 24.194-.712 35.892-.65 35.095.183 66.937 3.13 87.77 11.202l8.908 3.454-3.977 8.685c-29.061 63.485-35.782 124.732-31.228 184.826 2.248-71.318 31.893-134.75 70.81-216.068-52.956-8.8-109.634-12.582-168.959-12.78zm28.034 38.79c-8.74.007-17.65.184-26.559.526-41.672 1.6-83.199 6.49-110.264 12.096 30.233 56.079 54.69 112.287 70.483 167.082a71.934 71.934 0 0 1 5.894.045c4.018.197 7.992.742 11.875 1.59-16.075-51.397-34.385-98.8-57.146-146.131l-5.143-10.694 11.686-2.068c29.356-5.198 59.656-7.21 88.494-7.219 1.922 0 3.84.007 5.748.024 18.324.16 35.984 1.108 52.346 2.535l11.054.965-3.224 10.617c-18.7 61.563-22.363 127.678-11.79 190.582.176.163.354.325.526.49 3.813-1.336 7.38-2.698 10.705-4.154-8.254-67.394-4.597-136.923 26.229-209.201-17.202-4.383-43.425-6.674-72.239-7.034a656.656 656.656 0 0 0-8.675-.05zm144.945 7.385c-30.956 65.556-52.943 118.09-56.547 174.803 20.038-66.802 58.769-126.685 102.904-165.158a602.328 602.328 0 0 0-46.357-9.645zM103.832 97.02c-18.76 3.868-37.086 8.778-54.812 15.562 8.626 7.48 24.22 21.395 43.14 39.889 8.708-8.963 17.589-17.818 26.852-25.87a1067.587 1067.587 0 0 0-15.18-29.581zm142.023 7.482c-13.62-.066-27.562.324-41.554 1.293-1.468 13.682-9.56 26.482-19.225 39.07 15.431 36.469 28.758 73.683 40.756 113.194 18.375 5.42 36.554 11.827 51.28 19.504-5.47-42.458-4.722-85.963 2.38-128.508-12.885-13.31-19.597-28.09-20.135-44.34a621.48 621.48 0 0 0-13.502-.213zm182.018 26.985c-24.73 29.3-46.521 65.997-61.37 105.912 27.264-38.782 60.79-69.032 96.477-90.4a1318.664 1318.664 0 0 0-35.107-15.512zm-300.74 11.959c-14.594 13.188-29.014 29.017-44.031 44.097 32.289 19.191 59.791 41.918 82.226 67.66 1.393-.526 2.8-.999 4.215-1.43-10.498-36.096-24.885-73.033-42.41-110.327zM360.52 268.198c-16.397 19.788-31.834 30.235-53.09 38.57 2.391 9.22-1.16 19.805-9.334 27.901-4.808 4.761-10.85 10.188-19.684 13.715a62.896 62.896 0 0 0 3.9 2.127c12.364 6.17 34.207 4.18 54.5-5.049 20.23-9.2 38.302-25.092 45-41.191 3.357-9.05.96-13.77-4.917-20.692-4.184-4.925-10.295-9.89-16.375-15.38zm-170.079.586c-10.715-.098-21.597 2.994-30.59 9.76-12.79 9.623-22.65 26.784-22.738 55.934v.2l-.01.2c-2.92 61.381 1.6 89.7 10.555 105.065 7.904 13.562 21.05 20.054 40.28 31.994.916-2.406 1.87-5.365 2.765-9.098 2.277-9.499 4.161-22.545 5.355-36.975 2.389-28.858 2.04-63.51-1.955-88.445l-2.111-13.19 13.016 2.995c31.615 7.273 49.7 8.132 60.2 6.28 10.502-1.854 14.061-5.523 20.221-11.624 5.79-5.732 5.682-7.795 4.456-11.021-1.227-3.227-6.149-8.545-14.5-13.633-16.703-10.176-45.085-19.611-71.614-26.647a53.988 53.988 0 0 0-13.33-1.795zm189.1 69.416c-10.013 9.754-22.335 17.761-35.277 23.647-20.983 9.542-44.063 13.907-63.211 7.553-6.76 2.516-10.687 5.407-12.668 7.8-2.718 3.284-2.888 5.7-1.967 9.16.92 3.46 3.665 7.568 7.059 10.524 3.393 2.956 7.426 4.492 8.959 4.564 46.794 2.222 67.046-11.207 92.277-26.783 7.358-4.542 10.174-13.743 9.469-22.931-.353-4.594-1.69-8.911-3.233-11.63a9.009 9.009 0 0 0-1.408-1.904zm-166.187 9.096c2.727 25.068 2.772 54.314.642 80.053-1.247 15.072-3.175 28.779-5.789 39.685-1.137 4.746-2.388 8.954-3.9 12.659l146.697-6.465c-1.656-6.149-3.344-12.324-5.031-18.502a127.004 127.004 0 0 1-17.24 4.424l.044.73-8.316.518c-5.121.614-10.452.953-15.983.992l-83.86 5.21 2.493-11.607c7.947-37.006 8.68-69.589 3.778-105.234a353.433 353.433 0 0 1-13.536-2.463zm31.972 4.684c3.948 31.933 3.473 62.41-2.406 95.2l19.264-1.196a39.44 39.44 0 0 1-6.1-14.778c-1.296-6.88-.575-14.538 3.926-20.87.199-.281.414-.55.627-.821-5.246-4.845-9.628-11.062-11.614-18.524-2.114-7.944-.794-17.67 5.497-25.27 2.079-2.51 4.592-4.776 7.543-6.816-2.61-2.08-4.898-4.285-6.874-6.582-3.064.021-6.345-.093-9.863-.343zm132.666 41.785c-23.456 14.253-49.81 27.876-96.41 25.664a26.402 26.402 0 0 1-4.518-.615c-1.233.553-1.891 1.256-2.382 1.947-.963 1.355-1.532 3.8-.909 7.113 1.248 6.627 7.525 13.889 13.37 14.569 41.385 4.813 69.979-8.726 87.341-24.477 8-7.258 8.068-11.9 6.89-16.951-.59-2.523-1.89-4.969-3.382-7.25zm-6.683 49.062a114.657 114.657 0 0 1-8.547 4.86c1.65 6.051 3.304 12.102 4.937 18.154l19.92-3.572c-5.14-4.387-9.162-8.954-12.39-13.496-1.442-2.029-2.713-4.001-3.92-5.946z"})))}function $e(e){return u.createElement("div",{...e,className:p("w-full h-full aspect-square text-foreground",e.className),style:e.style},u.createElement("svg",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",viewBox:"0 0 16 16",height:"100%",width:"100%",xmlns:"http://www.w3.org/2000/svg"},u.createElement("path",{d:"m14.12 10.163 1.715.858c.22.11.22.424 0 .534L8.267 15.34a.6.6 0 0 1-.534 0L.165 11.555a.299.299 0 0 1 0-.534l1.716-.858 5.317 2.659c.505.252 1.1.252 1.604 0l5.317-2.66zM7.733.063a.6.6 0 0 1 .534 0l7.568 3.784a.3.3 0 0 1 0 .535L8.267 8.165a.6.6 0 0 1-.534 0L.165 4.382a.299.299 0 0 1 0-.535z"}),u.createElement("path",{d:"m14.12 6.576 1.715.858c.22.11.22.424 0 .534l-7.568 3.784a.6.6 0 0 1-.534 0L.165 7.968a.299.299 0 0 1 0-.534l1.716-.858 5.317 2.659c.505.252 1.1.252 1.604 0z"})))}function Le(e){return u.createElement("div",{...e,className:p("w-full h-full aspect-square text-foreground",e.className),style:e.style},u.createElement("svg",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",viewBox:"0 0 512 512",height:"100%",width:"100%",xmlns:"http://www.w3.org/2000/svg"},u.createElement("path",{d:"M32 456a24 24 0 0 0 24 24h400a24 24 0 0 0 24-24V176H32zm80-238.86a9.14 9.14 0 0 1 9.14-9.14h109.72a9.14 9.14 0 0 1 9.14 9.14v109.72a9.14 9.14 0 0 1-9.14 9.14H121.14a9.14 9.14 0 0 1-9.14-9.14zM456 64h-55.92V32h-48v32H159.92V32h-48v32H56a23.8 23.8 0 0 0-24 23.77V144h448V87.77A23.8 23.8 0 0 0 456 64z"})))}function Re(e,t=[]){let a=[];function i(n,o){const c=x.createContext(o),l=a.length;a=[...a,o];function h(d){const{scope:m,children:f,...w}=d,M=(m==null?void 0:m[e][l])||c,C=x.useMemo(()=>w,Object.values(w));return r.jsx(M.Provider,{value:C,children:f})}function y(d,m){const f=(m==null?void 0:m[e][l])||c,w=x.useContext(f);if(w)return w;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${n}\``)}return h.displayName=n+"Provider",[h,y]}const s=()=>{const n=a.map(o=>x.createContext(o));return function(c){const l=(c==null?void 0:c[e])||n;return x.useMemo(()=>({[`__scope${e}`]:{...c,[e]:l}}),[c,l])}};return s.scopeName=e,[i,Ge(s,...t)]}function Ge(...e){const t=e[0];if(e.length===1)return t;const a=()=>{const i=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(n){const o=i.reduce((c,{useScope:l,scopeName:h})=>{const d=l(n)[`__scope${h}`];return{...c,...d}},{});return x.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return a.scopeName=t.scopeName,a}var Te=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],ne=Te.reduce((e,t)=>{const a=x.forwardRef((i,s)=>{const{asChild:n,...o}=i,c=n?me:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),r.jsx(c,{...o,ref:s})});return a.displayName=`Primitive.${t}`,{...e,[t]:a}},{}),R="Progress",G=100,[Be,We]=Re(R),[Ae,De]=Be(R),se=x.forwardRef((e,t)=>{const{__scopeProgress:a,value:i=null,max:s,getValueLabel:n=_e,...o}=e;(s||s===0)&&!W(s)&&console.error(Oe(`${s}`,"Progress"));const c=W(s)?s:G;i!==null&&!Y(i,c)&&console.error(Ie(`${i}`,"Progress"));const l=Y(i,c)?i:null,h=N(l)?n(l,c):void 0;return r.jsx(Ae,{scope:a,value:l,max:c,children:r.jsx(ne.div,{"aria-valuemax":c,"aria-valuemin":0,"aria-valuenow":N(l)?l:void 0,"aria-valuetext":h,role:"progressbar","data-state":ce(l,c),"data-value":l??void 0,"data-max":c,...o,ref:t})})});se.displayName=R;var oe="ProgressIndicator",ie=x.forwardRef((e,t)=>{const{__scopeProgress:a,...i}=e,s=De(oe,a);return r.jsx(ne.div,{"data-state":ce(s.value,s.max),"data-value":s.value??void 0,"data-max":s.max,...i,ref:t})});ie.displayName=oe;function _e(e,t){return`${Math.round(e/t*100)}%`}function ce(e,t){return e==null?"indeterminate":e===t?"complete":"loading"}function N(e){return typeof e=="number"}function W(e){return N(e)&&!isNaN(e)&&e>0}function Y(e,t){return N(e)&&!isNaN(e)&&e<=t&&e>=0}function Oe(e,t){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${G}\`.`}function Ie(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${G} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var le=se,Ve=ie;const T=x.forwardRef(({barColor:e,className:t,value:a,...i},s)=>r.jsx(le,{ref:s,className:p("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...i,children:r.jsx(Ve,{className:p("h-full w-full flex-1 transition-all",e,{"bg-primary":!e}),style:{transform:`translateX(-${100-(a||0)}%)`}})}));T.displayName=le.displayName;const K=e=>r.jsxs("div",{className:"flex items-center h-7 w-[250px]",children:[r.jsx(re,{type:e.type,value:e.value,iconScale:e.iconScale,textColor:e.textColor,className:"absolute -translate-x-1/2 z-50 scale-50"}),r.jsx(T,{barColor:e.barColor,className:e.className,value:e.value/e.max*100})]}),He=[{name:"‡∏ü- ◊ßùñÜ‚Ä†/‚ë≥ -–∂",score:38120},{name:"Ghom",score:37980},{name:"Makushi",score:34740},{name:"Xibalba",score:24050}];function qe(e){return u.createElement("div",{...e,className:p("w-full h-full aspect-square text-foreground",e.className),style:e.style},u.createElement("svg",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",viewBox:"0 0 512 512",height:"100%",width:"100%",xmlns:"http://www.w3.org/2000/svg"},u.createElement("path",{d:"M399.9 80V32H112v48H32v38c0 32 9.5 62.79 26.76 86.61 13.33 18.4 34.17 31.1 52.91 37.21 5.44 29.29 20.2 57.13 50.19 79.83 22 16.66 48.45 28.87 72.14 33.86V436h-74v44h192v-44h-74v-80.49c23.69-5 50.13-17.2 72.14-33.86 30-22.7 44.75-50.54 50.19-79.83 18.74-6.11 39.58-18.81 52.91-37.21C470.5 180.79 480 150 480 118V80zM94.4 178.8c-10.68-14.68-17.17-34.4-18.24-54.8H112v67.37c-3.94-1.14-12.92-6.12-17.6-12.57zm323.2 0c-4.6 6.61-11.6 12.58-17.6 12.58 0-22.4 0-46.29-.05-67.38h35.9c-1.08 20.4-7.85 39.9-18.25 54.8z"})))}const Ze=()=>r.jsxs("div",{className:"pt-5 space-y-3 pointer-events-auto opacity-50 hover:opacity-100 transition-opacity duration-500",children:[r.jsx("div",{className:"text-2xl",children:"Scoreboard"}),r.jsx("table",{children:r.jsx("tbody",{children:He.sort((e,t)=>t.score-e.score).map((e,t)=>r.jsxs("tr",{className:p({"text-upgrade":t===0,"text-zinc-400":t===1,"text-orange-600":t===2}),children:[r.jsx("td",{children:t<3?r.jsx(qe,{className:p("w-4",{"text-upgrade":t===0,"text-zinc-400":t===1,"text-orange-600":t===2})}):""}),r.jsxs("th",{children:["# ",t+1]}),r.jsx("th",{className:"text-left",children:e.name}),r.jsxs("td",{children:[e.score.toLocaleString()," pts"]})]},t))})}),r.jsx("p",{className:"text-muted-foreground text-sm bg-muted py-1 px-2 rounded-md",children:"Si vous avez un meilleur score, vous pouvez me le soumettre en me contactant sur Discord ou LinkedIn !"})]}),Ue=()=>{const e=S(),t=F(),[a,i]=u.useState(0),[s,n]=u.useState(!1);return r.jsxs("div",{className:"w-[300px] ml-10 mt-4 space-y-2",children:[r.jsx("code",{children:"CardGame v1-stable [WIP]"}),r.jsx(K,{type:"energy",value:e.energy,max:z}),r.jsx(K,{type:"reputation",value:e.reputation,max:$,barColor:"bg-pink-500"}),r.jsxs("div",{className:"*:flex *:items-center *:gap-2 *:whitespace-nowrap space-y-2",children:[r.jsxs("div",{children:[r.jsx(ze,{className:"w-6"})," ",r.jsx("span",{dangerouslySetInnerHTML:{__html:j(`Argent: ${e.money}M$ sur ${L}M$`)}})]}),r.jsxs("div",{children:[r.jsx(Ee,{className:"w-6"})," Score:"," ",r.jsxs("span",{className:"text-upgrade font-changa",children:[e.score.toLocaleString("fr")," pts"]})]}),r.jsxs("div",{children:[r.jsx(Le,{className:"w-6"})," Jour: ",e.day]}),r.jsxs("div",{children:[r.jsx($e,{className:"w-6"})," Deck: ",e.deck.length]}),r.jsxs("div",{children:[r.jsx(ke,{className:"w-6"})," D√©fausse: ",e.discard.length]})]}),r.jsx("div",{className:"grid grid-cols-3 p-2 gap-5 relative shrink-0 w-max",children:e.upgrades.map((o,c)=>r.jsxs("div",{className:"group/upgrade shrink-0",children:[r.jsx("img",{src:`images/upgrades/${o.image}`,alt:o.name,className:p("block object-cover w-16 h-16 aspect-square rounded-full pointer-events-auto cursor-pointer mx-auto ring-upgrade ring-4",{"animate-trigger":o.state==="triggered"})}),r.jsx("div",{className:"h-6 relative",children:r.jsxs("div",{className:"relative",children:[o.max!==1/0&&r.jsx(T,{className:"absolute -translate-y-2 w-full",barColor:"bg-upgrade",value:o.cumul/o.max*100}),r.jsx("div",{className:"absolute text-center font-changa left-0 -translate-y-3 aspect-square h-6 rounded-full bg-upgrade shadow shadow-black",children:o.cumul})]})}),r.jsxs("div",{className:"hidden group-hover/upgrade:block absolute right-0 top-1/2 -translate-y-1/2 translate-x-full pl-3",children:[r.jsxs("h3",{className:"text-lg",children:[o.name," ",r.jsxs("span",{className:"text-upgrade font-changa",children:[o.cumul," ",o.max!==1/0?`/ ${o.max}`:""]})]}),r.jsx("p",{dangerouslySetInnerHTML:{__html:j(ae(o.description,o.cumul))}})]})]},c))}),e.isGameOver&&r.jsxs("div",{className:"absolute top-0 left-0 w-screen h-screen flex flex-col items-center justify-center gap-7 bg-background/90 z-50 pointer-events-auto",children:[r.jsxs("div",{className:"*:text-6xl *:whitespace-nowrap",children:[e.isWon&&r.jsx("h1",{className:"text-green-500",children:"Vous avez gagn√© !"}),!e.isWon&&r.jsx("h1",{className:"text-red-500",children:"Vous avez perdu !"})]}),e.reason&&r.jsx("p",{className:"text-4xl",children:{reputation:"Vous avez utilis√© toute votre jauge de r√©putation...",mill:"Vous n'avez plus de carte...","soft-lock":"Votre main est injouable..."}[e.reason]}),e.isWon&&r.jsxs("p",{className:"text-center text-2xl",children:["Vous avez gagn√© en"," ",r.jsx("span",{className:"text-upgrade",children:e.day})," jours avec"," ",r.jsxs("span",{className:"inline-block bg-money text-white px-1",children:[e.money,"M$"]})," ","et ",r.jsx("span",{className:"text-reputation",children:e.reputation})," ","points de r√©putation ! ",r.jsx("br",{}),r.jsxs("span",{className:"block text-4xl mt-5",children:["Score:"," ",r.jsxs("span",{className:"text-upgrade font-changa",children:[e.score.toLocaleString("fr")," pts"]})]})]}),r.jsxs("div",{className:"flex gap-4",children:[r.jsx(P,{onClick:()=>t("/"),children:"Quitter"}),r.jsx(P,{onClick:()=>e.reset(),variant:"cta",size:"cta",children:"Recommencer"})]}),e.isWon&&r.jsx("a",{href:"https://buymeacoffee.com/ghom",className:"block px-3 py-2 animate-bounce border-2 border-upgrade/50 rounded-lg",children:"Buy me a coffee ‚òïÔ∏è"})]}),r.jsxs("div",{className:"flex gap-2 items-center justify-start",children:[r.jsx(P,{onClick:()=>{e.reset()},variant:"default",size:"cta",children:"Recommencer"}),r.jsxs("div",{className:"flex items-center gap-2 pointer-events-auto",onMouseEnter:()=>i((a+1)%J.length),children:[r.jsx(Pe,{className:"h-6 cursor-pointer",onClick:()=>n(!s)}),s&&r.jsx("span",{className:"whitespace-nowrap",dangerouslySetInnerHTML:{__html:j(J[a])}})]})]}),r.jsx(Ze,{})]})},Ye=e=>{const t=S(),a=F(),i=pe(n=>n.setCardGameVisibility),s=ge("(width >= 768px) and (height >= 768px)");return i(!!e.show),u.useEffect(()=>{s||a("/")},[s,a]),r.jsxs(r.Fragment,{children:[r.jsx("div",{className:p("absolute w-full transition-[left] ease-in-out duration-500 pointer-events-none",e.show?"left-0":"-left-full"),children:r.jsx(Ue,{})}),r.jsx("div",{className:p("absolute flex items-center -translate-x-1/2 max-w-[100vw]","left-[50vw] transition-[bottom] ease-in-out duration-1000",e.show?"bottom-[-50px]":"-bottom-full"),children:t.hand.sort((n,o)=>{const c=n.effect.type==="action"?1:0,l=o.effect.type==="action"?1:0,h=typeof n.effect.cost=="string"?1:0,y=typeof o.effect.cost=="string"?1:0,d=Number(n.effect.cost),m=Number(o.effect.cost),f=n.effect.description.localeCompare(o.effect.description);return c-l||h-y||d-m||f}).map((n,o)=>r.jsx(Ne,{card:n,position:o},o))})]})};export{Ye as Game};
